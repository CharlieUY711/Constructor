import{e as f,p as c}from"./index-uhFGGnVP.js";const s=`${f}/roadmap`,n={"Content-Type":"application/json",Authorization:`Bearer ${c}`,apikey:c};async function i(a){try{const r=await fetch(`${s}${a}`,{headers:n}),o=await r.json();return r.ok?{ok:!0,data:o}:{ok:!1,error:o.error||"Error en la petición"}}catch(r){return console.error(`Roadmap API GET ${a}:`,r),{ok:!1,error:String(r)}}}async function t(a,r){try{const o=await fetch(`${s}${a}`,{method:"POST",headers:n,body:JSON.stringify(r)}),e=await o.json();return o.ok?{ok:!0,data:e}:{ok:!1,error:e.error||"Error en la petición"}}catch(o){return console.error(`Roadmap API POST ${a}:`,o),{ok:!1,error:String(o)}}}async function d(a,r){try{const o=await fetch(`${s}${a}`,{method:"PUT",headers:n,body:JSON.stringify(r)}),e=await o.json();return o.ok?{ok:!0,data:e}:{ok:!1,error:e.error||"Error en la petición"}}catch(o){return console.error(`Roadmap API PUT ${a}:`,o),{ok:!1,error:String(o)}}}async function u(a){try{const r=await fetch(`${s}${a}`,{method:"DELETE",headers:n}),o=await r.json();return r.ok?{ok:!0}:{ok:!1,error:o.error||"Error en la petición"}}catch(r){return console.error(`Roadmap API DELETE ${a}:`,r),{ok:!1,error:String(r)}}}async function k(){var r;const a=await i("/modules");return a.ok?a.data?(console.log("[roadmapApi] Módulos recibidos:",((r=a.data.modules)==null?void 0:r.length)||0),a.data.modules||[]):(console.warn("[roadmapApi] getModules: respuesta sin data"),[]):(console.error("[roadmapApi] Error en getModules:",a.error),[])}async function p(a){await t("/modules-bulk",{modules:a})}async function w(a,r){await t(`/modules/${a}`,{...r,id:a})}async function y(){await u("/modules/reset")}async function m(a){const r=await i(`/tasks/${a}`);return!r.ok||!r.data?[]:r.data.tasks||[]}async function E(a){const r=await t("/tasks",a);if(!r.ok||!r.data)throw new Error(r.error||"Error creando task");return r.data.task}async function h(a,r){const o=await d(`/tasks/${a}`,r);if(!o.ok||!o.data)throw new Error(o.error||"Error actualizando task");return o.data.task}async function $(a){const r=await u(`/tasks/${a}`);if(!r.ok)throw new Error(r.error||"Error eliminando task")}async function g(a,r){const o=await t("/audit",{moduleId:a,...r});return!o.ok||!o.data?{ok:!1,error:o.error||"Error en auditoría"}:o.data}async function T(){const a=await i("/ideas-promovidas");return!a.ok||!a.data?[]:a.data.ideas||[]}async function A(a){const r=await t("/ideas-promovidas",a);if(!r.ok||!r.data)throw new Error(r.error||"Error promoviendo idea");return r.data.idea}async function P(a,r,o){const e=await d(`/ideas-promovidas/${a}`,{estado:r,module_id:o});if(!e.ok)throw new Error(e.error||"Error resolviendo idea")}export{k as a,y as b,g as c,w as d,E as e,$ as f,T as g,m as h,A as p,P as r,p as s,h as u};
