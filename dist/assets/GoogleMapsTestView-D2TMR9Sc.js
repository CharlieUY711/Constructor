import{r as f,j as e,g as S,t as p}from"./index-azkS-jky.js";import{G as F}from"./GoogleAddressAutocomplete-BKkbjZK1.js";import{G}from"./GoogleMap-BNSn7rqV.js";import{l as y,w as _,i as b}from"./loader-CAj64nxW.js";import{N as B}from"./navigation-DYGb3oEJ.js";import{L as A}from"./loader-circle-CxJlOYrT.js";import{M as h}from"./map-pin-BucniFEY.js";async function M(g){try{if(await y(),await _(),!b())throw new Error("Google Maps API no est√° disponible");const c=new window.google.maps.Geocoder;return new Promise((t,m)=>{c.geocode({address:g,region:"AR",language:"es"},(n,l)=>{if(l==="OK"&&n&&n.length>0){const s=n[0],d=s.geometry.location,r={};s.address_components.forEach(i=>{const a=i.types;a.includes("street_number")&&(r.street_number=i.long_name),a.includes("route")&&(r.route=i.long_name),a.includes("locality")&&(r.locality=i.long_name),a.includes("administrative_area_level_1")&&(r.administrative_area_level_1=i.short_name),a.includes("administrative_area_level_2")&&(r.administrative_area_level_2=i.long_name),a.includes("country")&&(r.country=i.short_name),a.includes("postal_code")&&(r.postal_code=i.long_name)}),t({address:g,lat:d.lat(),lng:d.lng(),formatted_address:s.formatted_address,place_id:s.place_id,types:s.types,components:r})}else l==="ZERO_RESULTS"?t(null):m(new Error(`Error en geocodificaci√≥n: ${l}`))})})}catch(c){throw console.error("[geocoding] Error geocodificando direcci√≥n:",c),c}}async function R(g,c){try{if(await y(),await _(),!b())throw new Error("Google Maps API no est√° disponible");const t=new window.google.maps.Geocoder;return new Promise((m,n)=>{t.geocode({location:{lat:g,lng:c},region:"AR",language:"es"},(l,s)=>{if(s==="OK"&&l&&l.length>0){const d=l[0],r={};d.address_components.forEach(i=>{const a=i.types;a.includes("street_number")&&(r.street_number=i.long_name),a.includes("route")&&(r.route=i.long_name),a.includes("locality")&&(r.locality=i.long_name),a.includes("administrative_area_level_1")&&(r.administrative_area_level_1=i.short_name),a.includes("administrative_area_level_2")&&(r.administrative_area_level_2=i.long_name),a.includes("country")&&(r.country=i.short_name),a.includes("postal_code")&&(r.postal_code=i.long_name)}),m({lat:g,lng:c,address:d.formatted_address,formatted_address:d.formatted_address,place_id:d.place_id,components:r})}else s==="ZERO_RESULTS"?m(null):n(new Error(`Error en geocodificaci√≥n inversa: ${s}`))})})}catch(t){throw console.error("[geocoding] Error en geocodificaci√≥n inversa:",t),t}}function P(){const[g,c]=f.useState(""),[t,m]=f.useState(""),[n,l]=f.useState(null),[s,d]=f.useState([]),[r,i]=f.useState(!1),[a,x]=f.useState(""),j=o=>{l(o),d([{id:"selected",lat:o.lat,lng:o.lng,title:o.address,color:"#FF6835"}]),p.success("Direcci√≥n seleccionada")},v=async()=>{if(!t.trim()){p.error("Ingres√° una direcci√≥n para geocodificar");return}i(!0),x("");try{const o=await M(t);o?(x(`‚úÖ Direcci√≥n encontrada:
üìç ${o.formatted_address}
üåê Lat: ${o.lat.toFixed(6)}
üåê Lng: ${o.lng.toFixed(6)}
üÜî Place ID: ${o.place_id||"N/A"}`),d([{id:"geocoded",lat:o.lat,lng:o.lng,title:o.formatted_address,color:"#10B981"}]),p.success("Geocodificaci√≥n exitosa")):(x("‚ùå No se encontr√≥ la direcci√≥n"),p.error("Direcci√≥n no encontrada"))}catch(o){const u=o instanceof Error?o.message:"Error desconocido";x(`‚ùå Error: ${u}`),p.error("Error en geocodificaci√≥n")}finally{i(!1)}},w=async()=>{if(!n){p.error("Seleccion√° una direcci√≥n primero");return}i(!0);try{const o=await R(n.lat,n.lng);o?(p.success("Geocodificaci√≥n inversa exitosa"),x(`‚úÖ Coordenadas ‚Üí Direcci√≥n:
üìç ${o.formatted_address}
üåê Lat: ${o.lat.toFixed(6)}
üåê Lng: ${o.lng.toFixed(6)}`)):x("‚ùå No se encontr√≥ direcci√≥n para esas coordenadas")}catch(o){const u=o instanceof Error?o.message:"Error desconocido";x(`‚ùå Error: ${u}`),p.error("Error en geocodificaci√≥n inversa")}finally{i(!1)}},E=n?{lat:n.lat,lng:n.lng}:{lat:-34.9011,lng:-56.1645};return e.jsxs("div",{style:{padding:"24px",maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:"bold",marginBottom:"8px"},children:"üó∫Ô∏è Prueba de Google Maps API"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"16px"},children:"Prob√° los componentes de geolocalizaci√≥n de Google Maps"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"8px",border:"1px solid #E5E7EB",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(S,{className:"w-5 h-5"}),"Autocompletado de Direcciones"]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Buscar direcci√≥n (con autocompletado)"}),e.jsx(F,{value:g,onChange:c,onSelect:j,placeholder:"Ej: Av. 18 de Julio 1234, Montevideo"})]}),n&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#F3F4F6",borderRadius:"6px",fontSize:"14px"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"8px"},children:"Direcci√≥n seleccionada:"}),e.jsx("div",{style:{color:"#6B7280"},children:n.address}),e.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#9CA3AF"},children:["Lat: ",n.lat.toFixed(6),", Lng: ",n.lng.toFixed(6)]})]})]}),e.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"8px",border:"1px solid #E5E7EB",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(B,{className:"w-5 h-5"}),"Geocodificaci√≥n Manual"]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Direcci√≥n a geocodificar"}),e.jsx("input",{type:"text",value:t,onChange:o=>m(o.target.value),placeholder:"Ej: Plaza Independencia, Montevideo",style:{width:"100%",padding:"10px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsx("button",{onClick:v,disabled:r||!t.trim(),style:{width:"100%",padding:"10px",background:r?"#9CA3AF":"#FF6835",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:r?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4 animate-spin"}),"Geocodificando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4"}),"Obtener Coordenadas"]})}),n&&e.jsx("button",{onClick:w,disabled:r,style:{width:"100%",marginTop:"8px",padding:"10px",background:r?"#9CA3AF":"#10B981",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:r?"not-allowed":"pointer"},children:"Geocodificaci√≥n Inversa (Coordenadas ‚Üí Direcci√≥n)"})]})]}),a&&e.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:"#F3F4F6",borderRadius:"8px",whiteSpace:"pre-line",fontSize:"14px",fontFamily:"monospace"},children:a}),e.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"8px",border:"1px solid #E5E7EB",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(h,{className:"w-5 h-5"}),"Mapa Interactivo"]}),e.jsx(G,{center:E,zoom:n?15:13,markers:s,height:"500px",onMarkerClick:o=>{p.info(`Marcador: ${o.title}`)}})]}),e.jsxs("div",{style:{marginTop:"24px",padding:"16px",background:"#EFF6FF",borderRadius:"8px",border:"1px solid #BFDBFE"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"üìù Instrucciones de prueba:"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",color:"#1E40AF"},children:[e.jsx("li",{children:"Us√° el autocompletado para buscar una direcci√≥n (aparecer√°n sugerencias mientras escrib√≠s)"}),e.jsx("li",{children:"Seleccion√° una direcci√≥n y ver√°s el marcador en el mapa"}),e.jsx("li",{children:'Prob√° la geocodificaci√≥n manual ingresando una direcci√≥n y haciendo clic en "Obtener Coordenadas"'}),e.jsx("li",{children:"Si hay una direcci√≥n seleccionada, pod√©s probar la geocodificaci√≥n inversa"}),e.jsx("li",{children:"El mapa se centrar√° autom√°ticamente en la direcci√≥n seleccionada"})]})]})]})}export{P as GoogleMapsTestView};
