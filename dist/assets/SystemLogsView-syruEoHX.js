import{r as n,j as o,g as D,D as z}from"./index-azkS-jky.js";import{O as T}from"./OrangeHeader-DXf0Dzcs.js";import{S as O}from"./scroll-text-nFWdMMrS.js";import{C as F}from"./circle-x-COk-C2Rm.js";import{T as j}from"./triangle-alert-h2js-0wt.js";import{C as x}from"./circle-check-BVQpnX8W.js";import{C as b}from"./cpu-DFSIzAuV.js";import{I as P}from"./info-BUSuYHl8.js";import{A as f}from"./activity-CDoqatXt.js";import{G as E}from"./globe-pwgLIKOf.js";import{Z as _}from"./zap-D43v8-VJ.js";import{S as W}from"./shield-CDbONb2E.js";import{S as M}from"./server-DTYno9w6.js";import{R as U}from"./refresh-cw-BHwv1Lfu.js";import{C as H}from"./chevron-down-DnRT3h9E.js";import{C as K}from"./chevron-right-E4Gd6Viu.js";import"./ConnectionStatusIcon-B0SH-dg6.js";import"./lightbulb-BiOuno9l.js";import"./map-pin-BucniFEY.js";const C={info:{label:"INFO",color:"#3B82F6",bg:"#EFF6FF",border:"#BFDBFE",icon:P},warn:{label:"WARN",color:"#D97706",bg:"#FFFBEB",border:"#FDE68A",icon:j},error:{label:"ERROR",color:"#EF4444",bg:"#FEF2F2",border:"#FECACA",icon:F},success:{label:"OK",color:"#059669",bg:"#F0FDF8",border:"#A7F3D0",icon:x},debug:{label:"DEBUG",color:"#9CA3AF",bg:"#F9FAFB",border:"#E5E7EB",icon:b}},S={system:{label:"Sistema",color:"#6B7280",icon:M},auth:{label:"Auth",color:"#8B5CF6",icon:W},database:{label:"Database",color:"#059669",icon:z},api:{label:"API",color:"#3B82F6",icon:E},edge:{label:"Edge",color:"#FF6835",icon:_},storage:{label:"Storage",color:"#F59E0B",icon:b},roadmap:{label:"Roadmap",color:"#6366F1",icon:x},integraciones:{label:"Integraciones",color:"#EC4899",icon:E},herramientas:{label:"Herramientas",color:"#10B981",icon:f},ecommerce:{label:"eCommerce",color:"#FF6835",icon:f}},$=Date.now(),s=t=>new Date($-t*6e4),d=[{id:"l001",ts:s(1),level:"success",module:"edge",message:"[Edge] Hono server respondi√≥ correctamente",duration:42},{id:"l002",ts:s(1),level:"info",module:"roadmap",message:"[Roadmap] GET /modules ‚Üí 67 m√≥dulos cargados desde KV",duration:38},{id:"l003",ts:s(2),level:"success",module:"database",message:"[DB] kv_store ‚Äî lectura OK",duration:18},{id:"l004",ts:s(3),level:"info",module:"system",message:"[System] M√≥dulo Checklist sincronizado ‚Äî 6 herramientas workspace actualizadas a ui-only",detail:"applyBuiltStatus() detect√≥ diff entre manifest y KV ‚Äî resync autom√°tico ejecutado"},{id:"l005",ts:s(5),level:"info",module:"roadmap",message:"[Roadmap] POST /modules-bulk ‚Üí 67 m√≥dulos guardados",duration:95},{id:"l006",ts:s(7),level:"success",module:"storage",message:"[Storage] Bucket module-files ‚Äî acceso OK",duration:55},{id:"l007",ts:s(8),level:"warn",module:"api",message:"[API] Plexo UV ‚Äî sin credenciales (PLEXO_API_KEY no configurado)",detail:"Variables de entorno requeridas: PLEXO_API_KEY, PLEXO_MERCHANT_ID"},{id:"l008",ts:s(9),level:"warn",module:"api",message:"[API] MercadoPago ‚Äî MP_ACCESS_TOKEN no encontrado",detail:"Configurar en Supabase ‚Üí Edge Functions ‚Üí Secrets"},{id:"l009",ts:s(10),level:"warn",module:"api",message:"[API] Twilio ‚Äî TWILIO_ACCOUNT_SID no configurado"},{id:"l010",ts:s(12),level:"info",module:"auth",message:"[Auth] Sesi√≥n verificada ‚Äî usuario admin",duration:12},{id:"l011",ts:s(15),level:"success",module:"roadmap",message:"[Roadmap] Resync manifest completado ‚Äî 6 nuevas entradas detectadas",detail:"tools-library, tools-image-editor, tools-documents, tools-quotes, tools-ocr, tools-print ‚Üí ui-only"},{id:"l012",ts:s(20),level:"info",module:"herramientas",message:"[Herramientas] BibliotecaWorkspace montado ‚Äî listo para uso"},{id:"l013",ts:s(22),level:"info",module:"herramientas",message:"[Herramientas] EditorImagenesWorkspace montado"},{id:"l014",ts:s(24),level:"info",module:"herramientas",message:"[Herramientas] OCRWorkspace montado ‚Äî Tesseract.js disponible"},{id:"l015",ts:s(30),level:"info",module:"ecommerce",message:"[eCommerce] PedidosView: 12 pedidos cargados desde Supabase",duration:124},{id:"l016",ts:s(35),level:"info",module:"database",message:"[DB] pedidos ‚Äî query completada en 124ms",duration:124},{id:"l017",ts:s(40),level:"success",module:"integraciones",message:"[Integraciones] Hub cargado ‚Äî 5 m√≥dulos + Repositorio de APIs"},{id:"l018",ts:s(45),level:"debug",module:"system",message:"[System] APP_INIT ‚Äî AdminDashboard montado correctamente",duration:210},{id:"l019",ts:s(48),level:"debug",module:"system",message:"[System] moduleRegistry compilado ‚Äî 56 secciones registradas"},{id:"l020",ts:s(60),level:"info",module:"storage",message:"[Storage] Bucket etiquetas ‚Äî bucket verificado",duration:67},{id:"l021",ts:s(65),level:"warn",module:"api",message:"[API] Resend ‚Äî RESEND_API_KEY no configurado, emails transaccionales deshabilitados"},{id:"l022",ts:s(70),level:"info",module:"edge",message:"[Edge] Ruta /etiquetas registrada ‚Äî 5 endpoints activos"},{id:"l023",ts:s(75),level:"info",module:"edge",message:"[Edge] Ruta /roadmap registrada ‚Äî 6 endpoints activos"},{id:"l024",ts:s(80),level:"info",module:"edge",message:"[Edge] Ruta /ideas-board registrada"},{id:"l025",ts:s(90),level:"success",module:"database",message:"[DB] ideas ‚Äî tabla verificada, 0 canvases activos",duration:31}];function A(t){return t.toLocaleTimeString("es-UY",{hour:"2-digit",minute:"2-digit",second:"2-digit"})+" "+t.toLocaleDateString("es-UY",{day:"2-digit",month:"2-digit"})}function ce({onNavigate:t}){const[c,h]=n.useState(""),[m,v]=n.useState("all"),[u,y]=n.useState("all"),[w,R]=n.useState(null),[k,B]=n.useState(0),g=n.useMemo(()=>d.filter(e=>{var l;return!(m!=="all"&&e.level!==m||u!=="all"&&e.module!==u||c&&!e.message.toLowerCase().includes(c.toLowerCase())&&!((l=e.detail)!=null&&l.toLowerCase().includes(c.toLowerCase())))}),[c,m,u,k]),p={error:d.filter(e=>e.level==="error").length,warn:d.filter(e=>e.level==="warn").length,info:d.filter(e=>e.level==="info"||e.level==="success").length,debug:d.filter(e=>e.level==="debug").length},I=()=>{const e=d.map(a=>`[${A(a.ts)}] [${a.level.toUpperCase()}] [${a.module}] ${a.message}${a.detail?`
  ‚Üí `+a.detail:""}`).join(`
`),l=new Blob([e],{type:"text/plain"}),r=URL.createObjectURL(l),i=document.createElement("a");i.href=r,i.download=`charlie-logs-${new Date().toISOString().slice(0,10)}.txt`,i.click(),URL.revokeObjectURL(r)};return o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsx(T,{icon:O,title:"Logs del Sistema",subtitle:"Registro de actividad y eventos del sistema",actions:[{label:"‚Üê Auditor√≠a",onClick:()=>t("auditoria")},{label:"‚Üì Exportar TXT",onClick:I}]}),o.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px 32px",backgroundColor:"#F8F9FA"},children:[o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,marginBottom:20},children:[{label:"Errores",value:p.error,color:"#EF4444",icon:F},{label:"Advertencias",value:p.warn,color:"#D97706",icon:j},{label:"Info / Success",value:p.info,color:"#059669",icon:x},{label:"Debug",value:p.debug,color:"#9CA3AF",icon:b}].map(({label:e,value:l,color:r,icon:i})=>o.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:12,padding:"14px 18px",border:"1px solid #E5E7EB",display:"flex",alignItems:"center",gap:10},children:[o.jsx("div",{style:{width:36,height:36,borderRadius:9,backgroundColor:`${r}12`,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(i,{size:15,color:r})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.4rem",fontWeight:"800",color:"#111827",lineHeight:1},children:l}),o.jsx("div",{style:{fontSize:"0.68rem",color:"#9CA3AF",marginTop:2},children:e})]})]},e))}),o.jsxs("div",{style:{display:"flex",gap:10,marginBottom:16,flexWrap:"wrap",alignItems:"center"},children:[o.jsxs("div",{style:{position:"relative",flex:1,minWidth:200},children:[o.jsx(D,{size:13,color:"#9CA3AF",style:{position:"absolute",left:9,top:"50%",transform:"translateY(-50%)"}}),o.jsx("input",{value:c,onChange:e=>h(e.target.value),placeholder:"Buscar en logs...",style:{width:"100%",paddingLeft:30,paddingRight:10,paddingTop:8,paddingBottom:8,border:"1px solid #E5E7EB",borderRadius:8,fontSize:"0.8rem",outline:"none",backgroundColor:"#fff",boxSizing:"border-box"}})]}),o.jsxs("select",{value:m,onChange:e=>v(e.target.value),style:{padding:"8px 10px",border:"1px solid #E5E7EB",borderRadius:8,fontSize:"0.8rem",outline:"none",backgroundColor:"#fff",cursor:"pointer"},children:[o.jsx("option",{value:"all",children:"Todos los niveles"}),Object.entries(C).map(([e,l])=>o.jsx("option",{value:e,children:l.label},e))]}),o.jsxs("select",{value:u,onChange:e=>y(e.target.value),style:{padding:"8px 10px",border:"1px solid #E5E7EB",borderRadius:8,fontSize:"0.8rem",outline:"none",backgroundColor:"#fff",cursor:"pointer"},children:[o.jsx("option",{value:"all",children:"Todos los m√≥dulos"}),Object.entries(S).map(([e,l])=>o.jsx("option",{value:e,children:l.label},e))]}),o.jsxs("button",{onClick:()=>{h(""),v("all"),y("all"),B(e=>e+1)},style:{display:"flex",alignItems:"center",gap:5,padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:8,backgroundColor:"#fff",fontSize:"0.8rem",color:"#6B7280",cursor:"pointer"},children:[o.jsx(U,{size:12})," Limpiar"]}),o.jsxs("span",{style:{fontSize:"0.72rem",color:"#9CA3AF"},children:[g.length," entradas"]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace'},children:[g.map(e=>{const l=C[e.level],r=S[e.module],i=w===e.id,a=l.icon,L=r.icon;return o.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:8,border:`1px solid ${e.level==="error"?"#FECACA":e.level==="warn"?"#FDE68A":"#E5E7EB"}`,overflow:"hidden"},children:[o.jsxs("button",{onClick:()=>e.detail?R(i?null:e.id):null,style:{width:"100%",padding:"9px 12px",display:"flex",alignItems:"center",gap:10,background:"none",border:"none",cursor:e.detail?"pointer":"default",textAlign:"left"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"2px 8px",borderRadius:4,backgroundColor:l.bg,border:`1px solid ${l.border}`,flexShrink:0,minWidth:68},children:[o.jsx(a,{size:10,color:l.color}),o.jsx("span",{style:{fontSize:"0.65rem",fontWeight:"800",color:l.color,letterSpacing:"0.04em"},children:l.label})]}),o.jsx("span",{style:{fontSize:"0.68rem",color:"#9CA3AF",flexShrink:0,minWidth:110},children:A(e.ts)}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:3,flexShrink:0},children:[o.jsx(L,{size:10,color:r.color}),o.jsx("span",{style:{fontSize:"0.65rem",fontWeight:"700",color:r.color,minWidth:80},children:r.label})]}),o.jsx("span",{style:{flex:1,fontSize:"0.76rem",color:"#374151",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.message}),e.duration&&o.jsxs("span",{style:{fontSize:"0.65rem",color:"#9CA3AF",flexShrink:0},children:[e.duration,"ms"]}),e.detail&&(i?o.jsx(H,{size:12,color:"#9CA3AF",style:{flexShrink:0}}):o.jsx(K,{size:12,color:"#9CA3AF",style:{flexShrink:0}}))]}),i&&e.detail&&o.jsx("div",{style:{borderTop:`1px dashed ${l.border}`,padding:"8px 12px 10px 12px",backgroundColor:l.bg},children:o.jsx("pre",{style:{margin:0,fontSize:"0.72rem",color:"#374151",whiteSpace:"pre-wrap",wordBreak:"break-word",lineHeight:1.5},children:e.detail})})]},e.id)}),g.length===0&&o.jsxs("div",{style:{textAlign:"center",padding:"60px 0",color:"#9CA3AF"},children:[o.jsx(f,{size:40,style:{margin:"0 auto 12px",display:"block",opacity:.3}}),o.jsx("p",{style:{margin:0,fontWeight:"600"},children:"No hay logs que coincidan con los filtros"})]})]}),o.jsx("div",{style:{marginTop:16,padding:"10px 14px",backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:8},children:o.jsxs("p",{style:{margin:0,fontSize:"0.7rem",color:"#9CA3AF"},children:["üí° Logs simulados para demostraci√≥n. En producci√≥n se integrar√≠a con ",o.jsx("strong",{children:"Supabase Logs"})," o un servicio como ",o.jsx("strong",{children:"Logflare / Logtail"}),"."]})})]})]})}export{ce as SystemLogsView};
