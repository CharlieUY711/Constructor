import{r as u,j as e,g as R,C as D}from"./index-azkS-jky.js";import{O as w}from"./OrangeHeader-DXf0Dzcs.js";import{R as C}from"./receipt-BWxZhwti.js";import{P as E}from"./plus-DQBZQ3QI.js";import{X as b}from"./x-juMb23hc.js";import{C as M}from"./clock-D0ZD3uxc.js";import{C as k}from"./circle-check-BVQpnX8W.js";import{E as q}from"./eye-6LGqqK-f.js";import{P as y}from"./printer-CwfOcz3z.js";import{D as v}from"./download-EN34BNFH.js";import{F as P}from"./file-text-DvfuDXZw.js";import"./ConnectionStatusIcon-B0SH-dg6.js";import"./zap-D43v8-VJ.js";import"./lightbulb-BiOuno9l.js";import"./map-pin-BucniFEY.js";const s="#FF6835",c=[{id:"1",number:"FAC-2026-0001",date:"2026-02-19",dueDate:"2026-03-05",customer:"Ana GarcÃ­a",customerDoc:"CI: 1.234.567-8",items:[{description:"iPhone 14 128GB",qty:1,price:899.99}],status:"paid",type:"factura",paymentMethod:"Tarjeta"},{id:"2",number:"FAC-2026-0002",date:"2026-02-18",dueDate:"2026-03-04",customer:"Carlos MartÃ­n",customerDoc:"CI: 2.345.678-9",items:[{description:"AirPods Pro",qty:2,price:249.99},{description:"Cargador 65W",qty:1,price:35}],status:"pending",type:"factura",paymentMethod:"Efectivo"},{id:"3",number:"TKT-2026-0045",date:"2026-02-19",dueDate:"2026-02-19",customer:"Consumidor Final",customerDoc:"â€”",items:[{description:"CafÃ© Molido 500g",qty:3,price:8.5}],status:"paid",type:"ticket",paymentMethod:"Efectivo"},{id:"4",number:"FAC-2026-0003",date:"2026-02-15",dueDate:"2026-02-25",customer:"MarÃ­a LÃ³pez",customerDoc:"CI: 3.456.789-0",items:[{description:"Silla ErgonÃ³mica",qty:1,price:349}],status:"overdue",type:"factura",paymentMethod:"Transferencia"},{id:"5",number:"TKT-2026-0046",date:"2026-02-19",dueDate:"2026-02-19",customer:"Consumidor Final",customerDoc:"â€”",items:[{description:"Pelota Nike",qty:1,price:45},{description:"CafÃ© Molido",qty:2,price:8.5}],status:"paid",type:"ticket",paymentMethod:"Tarjeta"}],$={paid:{label:"Pagada",bg:"#DCFCE7",color:"#15803D",Icon:k},pending:{label:"Pendiente",bg:"#FEF3C7",color:"#B45309",Icon:M},overdue:{label:"Vencida",bg:"#FEE2E2",color:"#DC2626",Icon:D},cancelled:{label:"Anulada",bg:"#F3F4F6",color:"#6B7280",Icon:b}},h=.22;function te({onNavigate:z}){const[d,m]=u.useState("facturas"),[x,S]=u.useState(""),[p,g]=u.useState(null),[i,a]=u.useState({type:"factura",customer:"",customerDoc:"",paymentMethod:"Efectivo",items:[{description:"",qty:1,price:0}]}),B=c.filter(t=>t.status==="paid").reduce((t,o)=>t+o.items.reduce((n,r)=>n+r.qty*r.price,0),0),T=c.filter(t=>t.status==="pending"),A=c.filter(t=>t.status==="overdue"),W=c.filter(t=>!(d==="tickets"&&t.type!=="ticket"||d==="facturas"&&t.type==="ticket"||x&&!t.customer.toLowerCase().includes(x.toLowerCase())&&!t.number.toLowerCase().includes(x.toLowerCase()))),f=i.items.reduce((t,o)=>t+o.qty*o.price,0),j=f*h,I=f+j;return e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx(w,{icon:C,title:"FacturaciÃ³n",subtitle:"EmisiÃ³n de facturas, tickets y notas de crÃ©dito â€” ERP",actions:[{label:"Volver",onClick:()=>z("gestion")},{label:"+ Nueva Factura",primary:!0,onClick:()=>m("nueva")}]}),e.jsx("div",{style:{backgroundColor:"#FFFFFF",borderBottom:"1px solid #E5E7EB",flexShrink:0},children:e.jsx("div",{style:{display:"flex",padding:"0 28px"},children:[{id:"facturas",label:"ðŸ§¾ Facturas"},{id:"tickets",label:"ðŸŽ« Tickets"},{id:"nueva",label:"âœï¸ Nueva Factura/Ticket"}].map(t=>e.jsx("button",{onClick:()=>m(t.id),style:{padding:"14px 18px",border:"none",backgroundColor:"transparent",cursor:"pointer",color:d===t.id?s:"#6B7280",fontWeight:d===t.id?"700":"500",fontSize:"0.875rem",borderBottom:d===t.id?`2px solid ${s}`:"2px solid transparent"},children:t.label},t.id))})}),e.jsx("div",{style:{flex:1,overflowY:"auto",backgroundColor:"#F8F9FA"},children:e.jsxs("div",{style:{padding:"24px 28px",maxWidth:"1200px"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[{label:"Facturado (pagado)",value:`$${B.toLocaleString("es",{maximumFractionDigits:0})}`,color:"#16A34A"},{label:"Pendientes de cobro",value:`${T.length}`,color:"#D97706"},{label:"Vencidas",value:`${A.length}`,color:"#DC2626"},{label:"Total emitidas",value:c.length.toString(),color:"#111827"}].map((t,o)=>e.jsxs("div",{style:{backgroundColor:"#FFFFFF",border:"1px solid #E5E7EB",borderRadius:"10px",padding:"16px 20px"},children:[e.jsx("p",{style:{margin:"0 0 4px",fontSize:"0.78rem",color:"#6B7280"},children:t.label}),e.jsx("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"900",color:t.color},children:t.value})]},o))}),(d==="facturas"||d==="tickets")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"16px"},children:[e.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"320px"},children:[e.jsx(R,{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)"},size:14,color:"#9CA3AF"}),e.jsx("input",{type:"text",placeholder:"Buscar por cliente o nÃºmero...",value:x,onChange:t=>S(t.target.value),style:{width:"100%",padding:"9px 12px 9px 32px",border:"1px solid #E5E7EB",borderRadius:"8px",fontSize:"0.82rem",outline:"none",boxSizing:"border-box"}})]}),e.jsxs("button",{onClick:()=>m("nueva"),style:{padding:"9px 16px",backgroundColor:s,color:"#FFF",border:"none",borderRadius:"8px",fontWeight:"700",fontSize:"0.82rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(E,{size:14})," Nueva"]})]}),e.jsx("div",{style:{backgroundColor:"#FFFFFF",border:"1px solid #E5E7EB",borderRadius:"12px",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{backgroundColor:"#F9FAFB"},children:["NÃºmero","Cliente","Total","Vencimiento","MÃ©todo","Estado","Acciones"].map(t=>e.jsx("th",{style:{padding:"11px 14px",textAlign:"left",fontSize:"0.72rem",fontWeight:"700",color:"#374151",textTransform:"uppercase",letterSpacing:"0.04em"},children:t},t))})}),e.jsx("tbody",{children:W.map((t,o)=>{const n=t.items.reduce((l,F)=>l+F.qty*F.price,0),r=$[t.status];return e.jsxs("tr",{style:{borderTop:"1px solid #F3F4F6",backgroundColor:o%2===0?"#FFF":"#FAFAFA"},children:[e.jsx("td",{style:{padding:"12px 14px",fontFamily:"monospace",fontSize:"0.78rem",color:"#6B7280"},children:t.number}),e.jsxs("td",{style:{padding:"12px 14px"},children:[e.jsx("p",{style:{margin:0,fontWeight:"600",color:"#111827",fontSize:"0.875rem"},children:t.customer}),e.jsx("p",{style:{margin:"1px 0 0",fontSize:"0.72rem",color:"#9CA3AF"},children:t.customerDoc})]}),e.jsxs("td",{style:{padding:"12px 14px",fontWeight:"700",color:"#111827",fontSize:"0.9rem"},children:["$",n.toFixed(2),e.jsxs("p",{style:{margin:"1px 0 0",fontSize:"0.68rem",color:"#9CA3AF"},children:["+ IVA $",(n*h).toFixed(2)]})]}),e.jsx("td",{style:{padding:"12px 14px",color:t.status==="overdue"?"#DC2626":"#6B7280",fontSize:"0.8rem",fontWeight:t.status==="overdue"?"700":"400"},children:t.dueDate}),e.jsx("td",{style:{padding:"12px 14px",color:"#6B7280",fontSize:"0.8rem"},children:t.paymentMethod}),e.jsx("td",{style:{padding:"12px 14px"},children:e.jsxs("span",{style:{padding:"3px 9px",borderRadius:"20px",backgroundColor:r.bg,color:r.color,fontSize:"0.72rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"4px",width:"fit-content"},children:[e.jsx(r.Icon,{size:10})," ",r.label]})}),e.jsx("td",{style:{padding:"12px 14px"},children:e.jsxs("div",{style:{display:"flex",gap:"5px"},children:[e.jsx("button",{onClick:()=>g(t),style:{background:"none",border:"none",cursor:"pointer",color:"#6B7280",padding:"3px"},children:e.jsx(q,{size:14})}),e.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"#6B7280",padding:"3px"},children:e.jsx(y,{size:14})}),e.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"#6B7280",padding:"3px"},children:e.jsx(v,{size:14})})]})})]},t.id)})})]})})]}),d==="nueva"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E7EB",padding:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 14px",fontWeight:"700",color:"#111827",fontSize:"0.9rem"},children:"Tipo de comprobante"}),e.jsx("div",{style:{display:"flex",gap:"10px"},children:["factura","ticket"].map(t=>e.jsxs("button",{onClick:()=>a(o=>({...o,type:t})),style:{flex:1,padding:"12px",borderRadius:"10px",border:`2px solid ${i.type===t?s:"#E5E7EB"}`,backgroundColor:i.type===t?"#FFF4EC":"#FFF",cursor:"pointer",fontWeight:"700",color:i.type===t?s:"#374151",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[t==="factura"?e.jsx(P,{size:15}):e.jsx(C,{size:15}),t==="factura"?"Factura":"Ticket"]},t))})]}),e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E7EB",padding:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 14px",fontWeight:"700",color:"#111827",fontSize:"0.9rem"},children:"Cliente"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[{label:"Nombre del cliente",key:"customer",ph:i.type==="ticket"?"Consumidor Final":"Ana GarcÃ­a"},{label:"CI / RUC",key:"customerDoc",ph:i.type==="ticket"?"â€”":"CI: 1.234.567-8"}].map(({label:t,key:o,ph:n})=>e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.78rem",fontWeight:"600",color:"#374151",marginBottom:"4px"},children:t}),e.jsx("input",{type:"text",placeholder:n,value:i[o],onChange:r=>a(l=>({...l,[o]:r.target.value})),style:{width:"100%",padding:"9px 12px",border:"1px solid #E5E7EB",borderRadius:"8px",fontSize:"0.875rem",outline:"none",boxSizing:"border-box"}})]},o))})]}),e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E7EB",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"14px"},children:[e.jsx("h4",{style:{margin:0,fontWeight:"700",color:"#111827",fontSize:"0.9rem"},children:"ArtÃ­culos"}),e.jsxs("button",{onClick:()=>a(t=>({...t,items:[...t.items,{description:"",qty:1,price:0}]})),style:{padding:"5px 12px",backgroundColor:s,color:"#FFF",border:"none",borderRadius:"7px",fontWeight:"700",cursor:"pointer",fontSize:"0.78rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(E,{size:12})," Agregar"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"3fr 1fr 1fr auto",gap:"8px",marginBottom:"6px"},children:["DescripciÃ³n","Cant.","Precio",""].map(t=>e.jsx("span",{style:{fontSize:"0.72rem",fontWeight:"700",color:"#6B7280",textTransform:"uppercase"},children:t},t))}),i.items.map((t,o)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"3fr 1fr 1fr auto",gap:"8px",marginBottom:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",placeholder:"DescripciÃ³n del artÃ­culo",value:t.description,onChange:n=>{const r=[...i.items];r[o].description=n.target.value,a(l=>({...l,items:r}))},style:{padding:"8px 10px",border:"1px solid #E5E7EB",borderRadius:"7px",fontSize:"0.82rem",outline:"none"}}),e.jsx("input",{type:"number",value:t.qty,min:1,onChange:n=>{const r=[...i.items];r[o].qty=+n.target.value,a(l=>({...l,items:r}))},style:{padding:"8px 10px",border:"1px solid #E5E7EB",borderRadius:"7px",fontSize:"0.82rem",outline:"none"}}),e.jsx("input",{type:"number",value:t.price,step:.01,onChange:n=>{const r=[...i.items];r[o].price=+n.target.value,a(l=>({...l,items:r}))},style:{padding:"8px 10px",border:"1px solid #E5E7EB",borderRadius:"7px",fontSize:"0.82rem",outline:"none"}}),e.jsx("button",{onClick:()=>a(n=>({...n,items:n.items.filter((r,l)=>l!==o)})),style:{background:"none",border:"none",cursor:"pointer",color:"#EF4444",padding:"4px"},children:e.jsx(b,{size:14})})]},o))]}),e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E7EB",padding:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 12px",fontWeight:"700",color:"#111827",fontSize:"0.9rem"},children:"MÃ©todo de pago"}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["Efectivo","Tarjeta","Transferencia","Mercado Pago","Cuenta Corriente"].map(t=>e.jsx("button",{onClick:()=>a(o=>({...o,paymentMethod:t})),style:{padding:"8px 14px",borderRadius:"8px",border:`1.5px solid ${i.paymentMethod===t?s:"#E5E7EB"}`,backgroundColor:i.paymentMethod===t?"#FFF4EC":"#FFF",color:i.paymentMethod===t?s:"#374151",fontWeight:i.paymentMethod===t?"700":"500",cursor:"pointer",fontSize:"0.78rem"},children:t},t))})]})]}),e.jsx("div",{children:e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E7EB",padding:"20px",position:"sticky",top:"24px"},children:[e.jsx("h4",{style:{margin:"0 0 16px",fontWeight:"700",color:"#111827",fontSize:"0.9rem"},children:"Resumen"}),e.jsx("div",{style:{marginBottom:"16px"},children:i.items.filter(t=>t.description).map((t,o)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"0.82rem"},children:[e.jsxs("span",{style:{color:"#374151"},children:[t.qty,"x ",t.description||"â€”"]}),e.jsxs("span",{style:{fontWeight:"600",color:"#111827"},children:["$",(t.qty*t.price).toFixed(2)]})]},o))}),e.jsxs("div",{style:{borderTop:"1px solid #E5E7EB",paddingTop:"12px"},children:[[{label:"Subtotal",value:`$${f.toFixed(2)}`},{label:"IVA (22%)",value:`$${j.toFixed(2)}`}].map(t=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"0.82rem",color:"#6B7280"},children:[e.jsx("span",{children:t.label}),e.jsx("span",{children:t.value})]},t.label)),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #E5E7EB"},children:[e.jsx("span",{style:{fontWeight:"800",color:"#111827",fontSize:"1rem"},children:"TOTAL"}),e.jsxs("span",{style:{fontWeight:"900",color:s,fontSize:"1.1rem"},children:["$",I.toFixed(2)]})]})]}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("button",{style:{padding:"12px",backgroundColor:s,color:"#FFF",border:"none",borderRadius:"10px",fontWeight:"800",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(k,{size:16})," Emitir ",i.type==="factura"?"Factura":"Ticket"]}),e.jsxs("button",{style:{padding:"10px",backgroundColor:"#F3F4F6",color:"#374151",border:"none",borderRadius:"10px",fontWeight:"600",cursor:"pointer",fontSize:"0.82rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(y,{size:14})," Imprimir ticket"]})]})]})})]})]})}),p&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>g(null),children:e.jsxs("div",{style:{backgroundColor:"#FFF",borderRadius:"16px",padding:"28px",width:"440px"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[e.jsxs("h2",{style:{margin:0,fontWeight:"800",fontSize:"1rem",color:"#111827"},children:["ðŸ§¾ ",p.number]}),e.jsx("button",{onClick:()=>g(null),style:{background:"none",border:"none",cursor:"pointer",color:"#9CA3AF"},children:e.jsx(b,{size:18})})]}),e.jsxs("div",{style:{borderBottom:"2px dashed #E5E7EB",paddingBottom:"12px",marginBottom:"12px"},children:[e.jsx("p",{style:{margin:"0 0 2px",fontWeight:"700",color:"#111827",fontSize:"0.9rem"},children:p.customer}),e.jsxs("p",{style:{margin:0,color:"#9CA3AF",fontSize:"0.75rem"},children:[p.customerDoc," Â· ",p.date]})]}),p.items.map((t,o)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"0.82rem"},children:[e.jsxs("span",{style:{color:"#374151"},children:[t.qty,"x ",t.description]}),e.jsxs("span",{style:{fontWeight:"600"},children:["$",(t.qty*t.price).toFixed(2)]})]},o)),e.jsx("div",{style:{borderTop:"2px dashed #E5E7EB",paddingTop:"12px",marginTop:"12px"},children:(()=>{const t=p.items.reduce((n,r)=>n+r.qty*r.price,0),o=t*h;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.82rem",color:"#6B7280",marginBottom:"4px"},children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",t.toFixed(2)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.82rem",color:"#6B7280",marginBottom:"8px"},children:[e.jsx("span",{children:"IVA 22%"}),e.jsxs("span",{children:["$",o.toFixed(2)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"900",color:s,fontSize:"1rem"},children:[e.jsx("span",{children:"TOTAL"}),e.jsxs("span",{children:["$",(t+o).toFixed(2)]})]})]})})()}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[e.jsxs("button",{style:{flex:1,padding:"10px",backgroundColor:"#F3F4F6",color:"#374151",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px",fontSize:"0.82rem"},children:[e.jsx(y,{size:13})," Imprimir"]}),e.jsxs("button",{style:{flex:1,padding:"10px",backgroundColor:s,color:"#FFF",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px",fontSize:"0.82rem"},children:[e.jsx(v,{size:13})," PDF"]})]})]})})]})}export{te as ERPFacturacionView};
