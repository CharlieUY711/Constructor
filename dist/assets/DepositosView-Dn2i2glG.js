import{R as r,j as e,t as s}from"./index-Q3JFmZuo.js";import{O as B}from"./OrangeHeader-Dxoq7Mx9.js";import{d as z,g as R,u as w,c as A}from"./depositosApi-CTxHzzi_.js";import{L as T}from"./loader-circle-DdcU2fbr.js";import{P as W}from"./pen-DWYbUbQv.js";import{T as N}from"./trash-2-BrEzi9vR.js";import"./zap-BLZzAEoJ.js";import"./lightbulb-yBp16jJX.js";import"./map-pin-x8EonAdr.js";const p="#FF6835",u={propio:{label:"Propio",color:"#059669",bg:"#ECFDF5"},tercero:{label:"Tercero",color:"#2563EB",bg:"#EFF6FF"},cross_docking:{label:"Cross-Docking",color:"#7C3AED",bg:"#F5F3FF"}},j={tipo:"propio",activo:!0};function V({onNavigate:v}){const[x,C]=r.useState([]),[E,g]=r.useState(!0),[f,F]=r.useState(""),[t,n]=r.useState(j),[l,b]=r.useState(null),[k,d]=r.useState(!1),[h,m]=r.useState(!1),a=async()=>{g(!0);try{C(await R())}catch{s.error("Error")}finally{g(!1)}};r.useEffect(()=>{a()},[]);const y=x.filter(o=>o.nombre.toLowerCase().includes(f.toLowerCase())),D=async()=>{if(!t.nombre||!t.direccion)return s.error("Nombre y direccion requeridos");m(!0);try{l?(await w(l,t),s.success("Actualizado")):(await A(t),s.success("Creado")),d(!1),a()}catch{s.error("Error")}finally{m(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",background:"#F8FAFC"},children:[e.jsx(B,{title:"Depositos",subtitle:"Almacenes y centros de distribucion",onBack:()=>v("logistica")}),e.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:"24px 16px"},children:[e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:24},children:[e.jsx("input",{value:f,onChange:o=>F(o.target.value),placeholder:"Buscar deposito...",style:{flex:1,padding:"10px 12px",border:"1px solid #E5E7EB",borderRadius:8,fontSize:14}}),e.jsx("button",{onClick:()=>{n(j),b(null),d(!0)},style:{background:p,color:"#fff",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:600,cursor:"pointer"},children:"+ Nuevo"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:12,marginBottom:24},children:Object.entries(u).map(([o,i])=>e.jsxs("div",{style:{background:"#fff",border:"1px solid #E5E7EB",borderRadius:10,padding:16,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:22,fontWeight:700,color:i.color},children:x.filter(c=>c.tipo===o).length}),e.jsx("div",{style:{fontSize:13,color:"#6B7280"},children:i.label})]},o))}),E?e.jsx("div",{style:{textAlign:"center",padding:60},children:e.jsx(T,{size:32,style:{color:p}})}):y.length===0?e.jsx("div",{style:{textAlign:"center",padding:60,color:"#9CA3AF"},children:"No hay depositos."}):e.jsx("div",{style:{display:"grid",gap:10},children:y.map(o=>{const i=u[o.tipo]||u.propio;return e.jsxs("div",{style:{background:"#fff",border:"1px solid #E5E7EB",borderRadius:10,padding:"18px 20px",display:"flex",gap:16,alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700},children:o.nombre}),e.jsxs("div",{style:{fontSize:13,color:"#6B7280"},children:[o.direccion,o.ciudad&&", "+o.ciudad]})]}),e.jsx("span",{style:{background:i.bg,color:i.color,fontSize:12,fontWeight:600,padding:"3px 10px",borderRadius:20},children:i.label}),e.jsx("button",{onClick:()=>{n(o),b(o.id),d(!0)},style:{background:"none",border:"none",cursor:"pointer",color:"#6B7280"},children:e.jsx(W,{size:15})}),e.jsx("button",{onClick:async()=>{confirm("Eliminar?")&&(await z(o.id),a())},style:{background:"none",border:"none",cursor:"pointer",color:"#EF4444"},children:e.jsx(N,{size:15})})]},o.id)})}),k&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"#fff",borderRadius:14,padding:28,width:"100%",maxWidth:480},children:[e.jsxs("h3",{style:{margin:"0 0 20px"},children:[l?"Editar":"Nuevo"," deposito"]}),[["nombre","Nombre *"],["direccion","Direccion *"],["ciudad","Ciudad"],["responsable","Responsable"],["telefono","Telefono"]].map(([o,i])=>e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("label",{style:{fontSize:13,fontWeight:600,display:"block",marginBottom:4},children:i}),e.jsx("input",{value:t[o]||"",onChange:c=>n(S=>({...S,[o]:c.target.value})),style:{width:"100%",border:"1px solid #D1D5DB",borderRadius:8,padding:"9px 12px",fontSize:14,boxSizing:"border-box"}})]},o)),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("label",{style:{fontSize:13,fontWeight:600,display:"block",marginBottom:4},children:"Tipo"}),e.jsxs("select",{value:t.tipo||"propio",onChange:o=>n(i=>({...i,tipo:o.target.value})),style:{width:"100%",border:"1px solid #D1D5DB",borderRadius:8,padding:"9px 12px",fontSize:14},children:[e.jsx("option",{value:"propio",children:"Propio"}),e.jsx("option",{value:"tercero",children:"Tercero"}),e.jsx("option",{value:"cross_docking",children:"Cross-Docking"})]})]}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end",marginTop:20},children:[e.jsx("button",{onClick:()=>d(!1),style:{padding:"9px 18px",border:"1px solid #D1D5DB",borderRadius:8,cursor:"pointer"},children:"Cancelar"}),e.jsx("button",{onClick:D,disabled:h,style:{padding:"9px 18px",background:p,color:"#fff",border:"none",borderRadius:8,fontWeight:600,cursor:"pointer"},children:h?"Guardando...":"Guardar"})]})]})})]})]})}export{V as DepositosView};
