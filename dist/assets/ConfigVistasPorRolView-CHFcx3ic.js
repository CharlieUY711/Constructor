import{c as U,r as g,j as r,h as Y,S as P,M as V,D as Z,T as v,t as B,P as S,k as q}from"./index-uhFGGnVP.js";import{O as J}from"./OrangeHeader-CqvKi3aq.js";import{E as K}from"./eye-CCSX4XWe.js";import{R as Q}from"./rotate-ccw-BOi4qkEH.js";import{S as I}from"./save-BDA2gAzf.js";import{S as F}from"./shield-Ccsg3xQC.js";import{T as X}from"./triangle-alert-L0S-h2LE.js";import{I as ee}from"./info-BeRJDpOg.js";import{C as re}from"./chevron-down-BUpR3zXf.js";import{C as oe}from"./chevron-right-CCYj67e7.js";import{L as ie}from"./lock-CX6niNjK.js";import{C as R}from"./credit-card-Cu9enBKm.js";import{S as w}from"./settings-C9gzhJd0.js";import{U as D}from"./users-B6u9CIUx.js";import{Z as $}from"./zap-AC53IqjL.js";import{G as se}from"./globe-SRntvrmU.js";import{F as G}from"./file-text-CXLVGmRQ.js";import{C as ae}from"./chart-no-axes-column-D_c9qLPD.js";import"./ConnectionStatusIcon-OHswN8K_.js";import"./lightbulb-ahu2D9ei.js";import"./map-pin-DbWFQf1N.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],te=U("lock-open",le),h="#FF6835",j={Cliente:{color:"#6B7280",badge:"Acceso básico"},Colaborador:{color:"#10B981",badge:"Acceso operativo"},Editor:{color:"#3B82F6",badge:"Acceso editorial"},Administrador:{color:h,badge:"Acceso avanzado"},SuperAdmin:{color:"#7C3AED",badge:"Acceso total"}},d=(p,t,s,n,o)=>({id:p,label:t,icon:s,visible:n,subPermisos:o.map(([e,k,m])=>({id:e,label:k,enabled:m}))}),b=(p,t,s)=>({id:p,label:t,icon:R,visible:s,subPermisos:[{id:"ver",label:"Ver",enabled:s},{id:"configurar",label:"Configurar",enabled:!1},{id:"activar",label:"Activar/Desactivar",enabled:!1},{id:"credenciales",label:"Editar credenciales",enabled:!1}]}),A=(p,t,s)=>({id:p,label:t,icon:v,visible:s,subPermisos:[{id:"ver",label:"Ver",enabled:s},{id:"configurar",label:"Configurar",enabled:!1},{id:"activar",label:"Activar/Desactivar",enabled:!1}]}),L=p=>{const t=p==="Cliente",s=p==="Colaborador",n=p==="Editor",o=p==="Administrador",e=p==="SuperAdmin";return[{id:"ecommerce",label:"eCommerce",icon:P,color:h,expanded:!0,modulos:[d("pedidos","Pedidos",P,!0,[["ver","Ver pedidos",!0],["crear","Crear pedidos",s||n||o||e],["editar","Editar pedidos",o||e],["eliminar","Eliminar",e]]),d("clientes","Clientes",D,!t,[["ver","Ver clientes",!t],["crear","Crear clientes",s||o||e],["editar","Editar clientes",o||e],["eliminar","Eliminar",e]]),d("pagos","Pagos",R,!0,[["ver","Ver pagos",!0],["emitir","Emitir pagos",o||e],["devolver","Devoluciones",o||e]]),d("productos","Catálogo",S,!0,[["ver","Ver productos",!0],["crear","Crear productos",n||o||e],["editar","Editar productos",n||o||e],["eliminar","Eliminar",o||e]])]},{id:"marketing",label:"Marketing",icon:V,color:"#EC4899",expanded:!1,modulos:[d("campanas","Campañas",V,n||o||e,[["ver","Ver campañas",n||o||e],["crear","Crear campañas",n||o||e],["publicar","Publicar",o||e]]),d("mailing","Email Mailing",$,n||o||e,[["ver","Ver listas",n||o||e],["enviar","Enviar emails",o||e],["config","Configurar",e]]),d("seo","SEO",se,n||o||e,[["ver","Ver métricas",n||o||e],["editar","Editar metadata",n||o||e]]),d("rrss","RRSS Hub",q,n||o||e,[["ver","Ver conexiones",n||o||e],["publicar","Publicar",n||o||e],["config","Configurar cuentas",o||e]])]},{id:"gestion",label:"Gestión ERP",icon:Z,color:"#3B82F6",expanded:!1,modulos:[d("inventario","Inventario",S,!t,[["ver","Ver stock",!t],["ajustar","Ajustar stock",s||o||e],["crear","Crear artículos",o||e]]),d("facturacion","Facturación",G,o||e,[["ver","Ver facturas",o||e],["emitir","Emitir facturas",o||e],["anular","Anular facturas",e]]),d("erp-rrhh","RRHH",D,o||e,[["ver","Ver personal",o||e],["gestionar","Gestionar",o||e]]),d("erp-crm","CRM",ae,!t,[["ver","Ver contactos",!t],["editar","Editar",s||o||e]])]},{id:"logistica",label:"Logística",icon:v,color:"#10B981",expanded:!1,modulos:[d("envios","Envíos",v,!0,[["ver","Ver envíos",!0],["gestionar","Gestionar",s||o||e]]),d("transportistas","Transportistas",v,o||e,[["ver","Ver",o||e],["gestionar","Gestionar",o||e]]),d("fulfillment","Fulfillment",S,o||e,[["ver","Ver",o||e],["operar","Operar",o||e]])]},{id:"integraciones-pagos",label:"Pasarelas de Pago",icon:R,color:"#8B5CF6",expanded:!1,modulos:[b("mp","Mercado Pago",!t),b("plexo","Plexo",o||e),b("stripe","Stripe",e),b("paypal","PayPal",e),b("transferencia","Transferencia bancaria",!t),b("efectivo","Pago en efectivo",!t)]},{id:"integraciones-logistica-group",label:"Logística Integrada",icon:v,color:"#14B8A6",expanded:!1,modulos:[A("oca","OCA",o||e),A("andreani","Andreani",o||e),A("correo","Correo UY",o||e),A("pedidosya","PedidosYa",o||e)]},{id:"sistema-group",label:"Sistema & Config",icon:w,color:"#6B7280",expanded:!1,modulos:[d("sistema","Sistema",w,o||e,[["ver","Ver configuración",o||e],["editar","Editar config",e]]),d("auditoria","Auditoría",F,o||e,[["ver","Ver logs",o||e],["exportar","Exportar logs",e]]),d("constructor","Constructor",$,e,[["ver","Ver",e],["operar","Operar",e]]),d("documentacion","Documentación",G,!0,[["ver-usuario","Ver docs usuario",!0],["ver-tecnico","Ver docs técnicas",n||o||e],["editar","Editar docs",e]])]}]};function M({enabled:p,onChange:t,color:s}){return r.jsx("button",{onClick:t,style:{width:40,height:22,borderRadius:11,backgroundColor:p?s:"#D1D5DB",border:"none",cursor:"pointer",position:"relative",flexShrink:0,transition:"background 0.2s"},children:r.jsx("div",{style:{position:"absolute",top:3,left:p?21:3,width:16,height:16,borderRadius:"50%",backgroundColor:"#fff",boxShadow:"0 1px 3px rgba(0,0,0,0.3)",transition:"left 0.2s"}})})}function ze({onNavigate:p}){const t=["Cliente","Colaborador","Editor","Administrador","SuperAdmin"],[s,n]=g.useState("Editor"),[o,e]=g.useState(()=>{const i={};return t.forEach(l=>{i[l]=L(l)}),i}),[k,m]=g.useState(!1),C=j[s].color,O=g.useCallback(i=>{e(l=>{const a={...l};return a[s]=l[s].map(c=>c.id===i?{...c,expanded:!c.expanded}:c),a})},[s]),W=g.useCallback((i,l)=>{e(a=>{const c={...a};return c[s]=a[s].map(u=>u.id!==i?u:{...u,modulos:u.modulos.map(x=>x.id!==l?x:{...x,visible:!x.visible,subPermisos:x.subPermisos.map(f=>({...f,enabled:!x.visible}))})}),c}),m(!0)},[s]),T=g.useCallback((i,l,a)=>{e(c=>{const u={...c};return u[s]=c[s].map(x=>x.id!==i?x:{...x,modulos:x.modulos.map(f=>f.id!==l?f:{...f,subPermisos:f.subPermisos.map(y=>y.id!==a?y:{...y,enabled:!y.enabled})})}),u}),m(!0)},[s]),z=()=>{m(!1),B.success(`Permisos de "${s}" guardados`,{description:"Los cambios entrarán en efecto al recargar."})},N=()=>{e(i=>({...i,[s]:L(s)})),m(!1),B.info(`Permisos de "${s}" restaurados al valor predeterminado`)},E=o[s],H=E.reduce((i,l)=>i+l.modulos.length,0),_=E.reduce((i,l)=>i+l.modulos.filter(a=>a.visible).length,0);return r.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",backgroundColor:"#F8F9FA"},children:[r.jsx(J,{icon:K,title:"Configuración de Vistas por Rol",subtitle:"Define qué puede ver y hacer cada rol · Visual (v1.0)",actions:[{label:r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[r.jsx(Q,{size:13})," Restaurar"]}),onClick:N},{label:r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[r.jsx(I,{size:13})," Guardar cambios"]}),primary:!0,onClick:z}]}),r.jsxs("div",{style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{backgroundColor:"#fff",borderBottom:"1px solid #E5E7EB",padding:"0 28px",display:"flex",alignItems:"center",gap:0,flexShrink:0},children:[t.map(i=>{const l=i===s,a=j[i].color;return r.jsxs("button",{onClick:()=>{n(i),m(!1)},style:{padding:"14px 20px",border:"none",borderBottom:l?`3px solid ${a}`:"3px solid transparent",backgroundColor:"transparent",color:l?a:"#6B7280",fontSize:"0.85rem",fontWeight:l?"800":"600",cursor:"pointer",transition:"all 0.15s",display:"flex",alignItems:"center",gap:7},children:[r.jsx(F,{size:14,color:l?a:"#9CA3AF"}),i,l&&r.jsx("span",{style:{fontSize:"0.65rem",fontWeight:"700",color:a,backgroundColor:`${a}15`,padding:"2px 7px",borderRadius:5},children:j[i].badge})]},i)}),r.jsx("div",{style:{flex:1}}),k&&r.jsxs("span",{style:{fontSize:"0.75rem",color:"#F59E0B",fontWeight:"700",display:"flex",alignItems:"center",gap:5},children:[r.jsx(X,{size:12})," Cambios sin guardar"]})]}),r.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px 28px"},children:[r.jsxs("div",{style:{display:"flex",gap:12,marginBottom:24},children:[r.jsxs("div",{style:{flex:1,backgroundColor:"#fff",borderRadius:12,border:`1.5px solid ${C}30`,padding:"16px 20px",display:"flex",alignItems:"center",gap:12},children:[r.jsx("div",{style:{width:40,height:40,borderRadius:10,backgroundColor:`${C}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(F,{size:18,color:C})}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"800",color:"#111827"},children:s}),r.jsx("p",{style:{margin:"2px 0 0",fontSize:"0.75rem",color:"#6B7280"},children:j[s].badge})]})]}),r.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:12,border:"1px solid #E5E7EB",padding:"16px 22px",textAlign:"center"},children:[r.jsxs("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"800",color:C},children:[_,"/",H]}),r.jsx("p",{style:{margin:"2px 0 0",fontSize:"0.72rem",color:"#9CA3AF"},children:"Módulos visibles"})]}),r.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:12,border:"1px solid #E5E7EB",padding:"16px 22px",display:"flex",alignItems:"center",gap:8},children:[r.jsx(ee,{size:15,color:"#9CA3AF"}),r.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"#6B7280",maxWidth:200},children:"Los cambios son visuales. Conectar a backend para aplicar en tiempo real."})]})]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:E.map(i=>{const l=i.modulos.filter(a=>a.visible).length;return r.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:14,border:"1px solid #E5E7EB",overflow:"hidden"},children:[r.jsxs("button",{onClick:()=>O(i.id),style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"16px 20px",border:"none",backgroundColor:"transparent",cursor:"pointer",textAlign:"left",borderBottom:i.expanded?"1px solid #F3F4F6":"none"},children:[r.jsx("div",{style:{width:34,height:34,borderRadius:9,backgroundColor:`${i.color}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx(i.icon,{size:16,color:i.color})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("p",{style:{margin:0,fontSize:"0.9rem",fontWeight:"700",color:"#111827"},children:i.label}),r.jsxs("p",{style:{margin:"2px 0 0",fontSize:"0.72rem",color:"#9CA3AF"},children:[l,"/",i.modulos.length," módulos habilitados"]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[r.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"700",color:l>0?i.color:"#9CA3AF",backgroundColor:l>0?`${i.color}15`:"#F3F4F6",padding:"3px 9px",borderRadius:6},children:l>0?`${l} activos`:"Sin acceso"}),i.expanded?r.jsx(re,{size:16,color:"#9CA3AF"}):r.jsx(oe,{size:16,color:"#9CA3AF"})]})]}),i.expanded&&r.jsx("div",{style:{padding:"8px 20px 16px"},children:r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:10},children:i.modulos.map(a=>r.jsxs("div",{style:{borderRadius:12,border:`1.5px solid ${a.visible?i.color+"30":"#E5E7EB"}`,backgroundColor:a.visible?`${i.color}04`:"#FAFAFA",overflow:"hidden",transition:"all 0.15s"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"12px 14px",borderBottom:a.visible?`1px solid ${i.color}15`:"none"},children:[r.jsx("div",{style:{width:28,height:28,borderRadius:7,backgroundColor:a.visible?`${i.color}18`:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx(a.icon,{size:13,color:a.visible?i.color:"#9CA3AF"})}),r.jsx("div",{style:{flex:1},children:r.jsx("p",{style:{margin:0,fontSize:"0.82rem",fontWeight:"700",color:a.visible?"#111827":"#9CA3AF"},children:a.label})}),r.jsx(M,{enabled:a.visible,onChange:()=>W(i.id,a.id),color:i.color})]}),a.visible&&r.jsx("div",{style:{padding:"10px 14px",display:"flex",flexDirection:"column",gap:7},children:a.subPermisos.map(c=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[c.enabled?r.jsx(te,{size:11,color:i.color}):r.jsx(ie,{size:11,color:"#D1D5DB"}),r.jsx("span",{style:{fontSize:"0.74rem",color:c.enabled?"#374151":"#9CA3AF",fontWeight:c.enabled?"600":"400"},children:c.label})]}),r.jsx(M,{enabled:c.enabled,onChange:()=>T(i.id,a.id,c.id),color:i.color})]},c.id))})]},a.id))})})]},i.id)})}),r.jsxs("div",{style:{marginTop:24,padding:"16px 20px",backgroundColor:`${h}08`,borderRadius:12,border:`1.5px solid ${h}20`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx(Y,{size:15,color:h}),r.jsxs("p",{style:{margin:0,fontSize:"0.8rem",color:"#6B7280"},children:[r.jsx("strong",{style:{color:"#374151"},children:"Nivel 1 — Visual:"})," Los permisos se guardan localmente. Conectar a Supabase Auth para aplicar en tiempo real (Nivel 2)."]})]}),r.jsxs("button",{onClick:z,style:{display:"flex",alignItems:"center",gap:7,padding:"10px 20px",borderRadius:9,border:"none",backgroundColor:h,color:"#fff",fontSize:"0.82rem",fontWeight:"700",cursor:"pointer",flexShrink:0},children:[r.jsx(I,{size:14})," Guardar configuración"]})]})]})]})]})}export{ze as ConfigVistasPorRolView};
