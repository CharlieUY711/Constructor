import{c as L,r as x,j as e,f as I}from"./index-_pG1R_m2.js";import{W as M}from"./WorkspaceShell-ClpKkrRW.js";import{X as O}from"./x-Q0zSARHV.js";import{D as P}from"./download-D_c1PDiK.js";import{C as $}from"./copy-BJevNXe1.js";import{T as U}from"./trash-2-Bx95z1Pp.js";import{L as N}from"./list-BTKg9wSe.js";import{U as A}from"./upload-B0JY9PbE.js";import{C as Y}from"./circle-check-DiVEdbP2.js";import{T as _}from"./tag-B--wpmPO.js";import"./arrow-left-C6ngr9mr.js";import"./printer-BsiIBe2f.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],G=L("grid-3x3",q);function F(o){return o<1024?`${o} B`:o<1024*1024?`${(o/1024).toFixed(1)} KB`:`${(o/(1024*1024)).toFixed(1)} MB`}function w(o){return o.startsWith("image/")?"image":o.startsWith("video/")?"video":o.includes("pdf")||o.includes("doc")||o.includes("text")?"document":"other"}const S={image:"#3B82F6",document:"#10B981",video:"#8B5CF6",other:"#9CA3AF"},z={image:"ðŸ–¼ï¸",document:"ðŸ“„",video:"ðŸŽ¬",other:"ðŸ“Ž"};function K({filter:o,setFilter:n,collection:d,setCollection:c,assets:l}){const t={all:l.length};l.forEach(i=>{t[i.type]=(t[i.type]||0)+1});const j=["General","Productos","Marketing","Documentos"];return e.jsxs("div",{style:{padding:"10px 0"},children:[e.jsxs("div",{style:{padding:"0 10px",marginBottom:6},children:[e.jsx("p",{style:v,children:"Tipo de archivo"}),[{id:"all",label:"Todos",emoji:"ðŸ“‚"},{id:"image",label:"ImÃ¡genes",emoji:"ðŸ–¼ï¸"},{id:"document",label:"Documentos",emoji:"ðŸ“„"},{id:"video",label:"Videos",emoji:"ðŸŽ¬"},{id:"other",label:"Otros",emoji:"ðŸ“Ž"}].map(i=>e.jsxs("button",{onClick:()=>n(i.id),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"7px 10px",borderRadius:7,border:"none",backgroundColor:o===i.id?"#EFF6FF":"transparent",color:o===i.id?"#2563EB":"#374151",cursor:"pointer",fontSize:"0.78rem",fontWeight:o===i.id?"700":"500",marginBottom:1},children:[e.jsxs("span",{children:[i.emoji," ",i.label]}),e.jsx("span",{style:{fontSize:"0.65rem",backgroundColor:o===i.id?"#BFDBFE":"#F3F4F6",color:o===i.id?"#1D4ED8":"#9CA3AF",borderRadius:10,padding:"1px 6px",fontWeight:"700"},children:t[i.id]??0})]},i.id))]}),e.jsx("div",{style:{height:1,backgroundColor:"#F3F4F6",margin:"8px 0"}}),e.jsxs("div",{style:{padding:"0 10px"},children:[e.jsx("p",{style:v,children:"Colecciones"}),j.map(i=>e.jsxs("button",{onClick:()=>c(d===i?"":i),style:{width:"100%",display:"flex",alignItems:"center",gap:7,padding:"6px 10px",borderRadius:7,border:"none",backgroundColor:d===i?"#FFF4F0":"transparent",color:d===i?"#FF6835":"#374151",cursor:"pointer",fontSize:"0.78rem",fontWeight:d===i?"700":"500",marginBottom:1},children:[e.jsx(_,{size:12,style:{color:d===i?"#FF6835":"#9CA3AF"}}),i]},i))]}),e.jsx("div",{style:{height:1,backgroundColor:"#F3F4F6",margin:"8px 0"}}),e.jsxs("div",{style:{padding:"4px 10px"},children:[e.jsx("p",{style:v,children:"Almacenamiento"}),e.jsxs("div",{style:{padding:"8px 10px",borderRadius:8,backgroundColor:"#F9FAFB",border:"1px solid #F3F4F6"},children:[e.jsx("div",{style:{fontSize:"0.78rem",fontWeight:"700",color:"#111827"},children:F(l.reduce((i,u)=>i+u.size,0))}),e.jsxs("div",{style:{fontSize:"0.65rem",color:"#9CA3AF",marginTop:2},children:[l.length," archivos en total"]})]})]})]})}function V({assets:o,viewMode:n,setViewMode:d,onUpload:c,onSelect:l,selectedId:t,onDelete:j,searchQuery:i,setSearchQuery:u}){const g=x.useRef(null),[b,y]=x.useState(!1),C=x.useCallback(r=>{r.preventDefault(),y(!1),r.dataTransfer.files.length>0&&c(r.dataTransfer.files)},[c]),h=o.filter(r=>!i||r.name.toLowerCase().includes(i.toLowerCase())||r.tags.some(p=>p.toLowerCase().includes(i.toLowerCase())));return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[e.jsxs("div",{style:{height:48,backgroundColor:"#fff",borderBottom:"1px solid #E5E7EB",display:"flex",alignItems:"center",padding:"0 16px",gap:10,flexShrink:0},children:[e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:8,backgroundColor:"#F9FAFB",borderRadius:8,border:"1px solid #E5E7EB",padding:"6px 10px"},children:[e.jsx(I,{size:13,color:"#9CA3AF"}),e.jsx("input",{value:i,onChange:r=>u(r.target.value),placeholder:"Buscar por nombre o tag...",style:{flex:1,border:"none",outline:"none",fontSize:"0.8rem",backgroundColor:"transparent",color:"#374151"}})]}),e.jsx("div",{style:{display:"flex",borderRadius:7,border:"1px solid #E5E7EB",overflow:"hidden"},children:["grid","list"].map(r=>e.jsx("button",{onClick:()=>d(r),style:{padding:"6px 10px",border:"none",backgroundColor:n===r?"#FF6835":"#fff",color:n===r?"#fff":"#6B7280",cursor:"pointer"},children:r==="grid"?e.jsx(G,{size:14}):e.jsx(N,{size:14})},r))}),e.jsx("input",{ref:g,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt",style:{display:"none"},onChange:r=>r.target.files&&c(r.target.files)}),e.jsxs("button",{onClick:()=>{var r;return(r=g.current)==null?void 0:r.click()},style:{display:"flex",alignItems:"center",gap:6,padding:"7px 14px",borderRadius:8,border:"none",backgroundColor:"#FF6835",color:"#fff",cursor:"pointer",fontSize:"0.78rem",fontWeight:"700"},children:[e.jsx(A,{size:13})," Subir archivos"]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:16},onDragOver:r=>{r.preventDefault(),y(!0)},onDragLeave:()=>y(!1),onDrop:C,children:[b&&e.jsx("div",{style:{position:"absolute",inset:0,backgroundColor:"#3B82F620",border:"2px dashed #3B82F6",borderRadius:10,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center",color:"#2563EB"},children:[e.jsx(A,{size:32}),e.jsx("p",{style:{fontWeight:"700",fontSize:"0.9rem",marginTop:8},children:"Soltar archivos aquÃ­"})]})}),h.length===0&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center",color:"#9CA3AF",gap:12},children:[e.jsx("div",{style:{fontSize:"3rem"},children:"ðŸ“­"}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#374151",margin:"0 0 4px"},children:i?"Sin resultados":"Biblioteca vacÃ­a"}),e.jsx("p",{style:{fontSize:"0.78rem",margin:0},children:i?"ProbÃ¡ con otros tÃ©rminos":"SubÃ­ tus primeros archivos o arrastralos aquÃ­"})]}),!i&&e.jsx("button",{onClick:()=>{var r;return(r=g.current)==null?void 0:r.click()},style:{padding:"9px 20px",borderRadius:8,border:"1.5px dashed #3B82F6",backgroundColor:"#EFF6FF",color:"#2563EB",cursor:"pointer",fontSize:"0.78rem",fontWeight:"700"},children:"+ Subir primer archivo"})]}),n==="grid"&&h.length>0&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:10},children:h.map(r=>e.jsxs("div",{onClick:()=>l(r.id),style:{borderRadius:10,border:`2px solid ${t===r.id?"#3B82F6":"#E5E7EB"}`,backgroundColor:"#fff",cursor:"pointer",overflow:"hidden",transition:"all 0.15s",boxShadow:t===r.id?"0 0 0 3px #3B82F625":"none"},onMouseEnter:p=>{t!==r.id&&(p.currentTarget.style.borderColor="#93C5FD")},onMouseLeave:p=>{t!==r.id&&(p.currentTarget.style.borderColor="#E5E7EB")},children:[e.jsxs("div",{style:{height:90,backgroundColor:"#F9FAFB",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative"},children:[r.type==="image"&&r.thumbnail?e.jsx("img",{src:r.thumbnail,alt:r.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{fontSize:"2rem"},children:z[r.type]}),t===r.id&&e.jsx("div",{style:{position:"absolute",top:6,right:6},children:e.jsx(Y,{size:16,color:"#3B82F6",fill:"#fff"})})]}),e.jsxs("div",{style:{padding:"7px 8px"},children:[e.jsx("div",{style:{fontSize:"0.72rem",fontWeight:"600",color:"#111827",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.name}),e.jsx("div",{style:{fontSize:"0.62rem",color:"#9CA3AF",marginTop:2},children:F(r.size)})]})]},r.id))}),n==="list"&&h.length>0&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 80px",gap:8,padding:"4px 12px",fontSize:"0.62rem",fontWeight:"700",color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.05em"},children:[e.jsx("span",{children:"Nombre"}),e.jsx("span",{children:"Tipo"}),e.jsx("span",{children:"Fecha"}),e.jsx("span",{children:"TamaÃ±o"})]}),h.map(r=>e.jsxs("div",{onClick:()=>l(r.id),style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 80px",gap:8,padding:"8px 12px",backgroundColor:"#fff",borderRadius:8,border:`1.5px solid ${t===r.id?"#3B82F6":"#E5E7EB"}`,cursor:"pointer",alignItems:"center",transition:"all 0.12s"},onMouseEnter:p=>{t!==r.id&&(p.currentTarget.style.borderColor="#93C5FD")},onMouseLeave:p=>{t!==r.id&&(p.currentTarget.style.borderColor="#E5E7EB")},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,overflow:"hidden"},children:[r.type==="image"&&r.thumbnail?e.jsx("img",{src:r.thumbnail,alt:"",style:{width:28,height:28,borderRadius:4,objectFit:"cover",flexShrink:0}}):e.jsx("span",{style:{fontSize:"1.2rem",flexShrink:0},children:z[r.type]}),e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"600",color:"#111827",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.name})]}),e.jsx("span",{style:{fontSize:"0.68rem",color:S[r.type],fontWeight:"600",textTransform:"capitalize"},children:r.type}),e.jsx("span",{style:{fontSize:"0.7rem",color:"#6B7280"},children:r.date}),e.jsx("span",{style:{fontSize:"0.7rem",color:"#9CA3AF"},children:F(r.size)})]},r.id))]})]})]})}function H({asset:o,onDelete:n,onDownload:d}){const[c,l]=x.useState("");return o?e.jsxs("div",{children:[e.jsx("div",{style:{height:110,backgroundColor:"#F9FAFB",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12,overflow:"hidden",border:"1px solid #E5E7EB"},children:o.type==="image"&&o.thumbnail?e.jsx("img",{src:o.thumbnail,alt:o.name,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}):e.jsx("span",{style:{fontSize:"3rem"},children:z[o.type]})}),e.jsx("p",{style:m,children:"Nombre"}),e.jsx("p",{style:{fontSize:"0.78rem",fontWeight:"600",color:"#111827",wordBreak:"break-word",marginBottom:8},children:o.name}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("p",{style:m,children:"Tipo"}),e.jsx("span",{style:{fontSize:"0.72rem",fontWeight:"700",color:S[o.type],backgroundColor:`${S[o.type]}15`,padding:"2px 7px",borderRadius:4},children:o.type})]}),e.jsxs("div",{children:[e.jsx("p",{style:m,children:"TamaÃ±o"}),e.jsx("span",{style:{fontSize:"0.78rem",color:"#374151",fontWeight:"600"},children:F(o.size)})]}),e.jsxs("div",{children:[e.jsx("p",{style:m,children:"ColecciÃ³n"}),e.jsx("span",{style:{fontSize:"0.72rem",color:"#6B7280"},children:o.collection})]}),e.jsxs("div",{children:[e.jsx("p",{style:m,children:"Fecha"}),e.jsx("span",{style:{fontSize:"0.72rem",color:"#6B7280"},children:o.date})]})]}),e.jsx("p",{style:m,children:"Tags"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:5,marginBottom:8},children:o.tags.map(t=>e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:3,padding:"2px 7px",backgroundColor:"#F3F4F6",borderRadius:12,fontSize:"0.65rem",color:"#374151",fontWeight:"600"},children:[t," ",e.jsx(O,{size:9,style:{cursor:"pointer",color:"#9CA3AF"}})]},t))}),e.jsxs("div",{style:{display:"flex",gap:5,marginBottom:14},children:[e.jsx("input",{value:c,onChange:t=>l(t.target.value),placeholder:"+ nuevo tag",onKeyDown:t=>t.key==="Enter"&&l(""),style:{flex:1,padding:"4px 8px",border:"1px solid #E5E7EB",borderRadius:6,fontSize:"0.72rem",outline:"none"}}),e.jsx("button",{onClick:()=>l(""),style:{padding:"4px 8px",borderRadius:6,border:"1px solid #E5E7EB",backgroundColor:"#F9FAFB",cursor:"pointer",fontSize:"0.72rem"},children:"+"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsxs("button",{onClick:()=>d(o),style:{width:"100%",padding:"8px",borderRadius:7,border:"none",backgroundColor:"#3B82F6",color:"#fff",cursor:"pointer",fontSize:"0.75rem",fontWeight:"700",display:"flex",alignItems:"center",justifyContent:"center",gap:5},children:[e.jsx(P,{size:12})," Descargar"]}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(o.url).catch(()=>{})},style:{width:"100%",padding:"8px",borderRadius:7,border:"1px solid #E5E7EB",backgroundColor:"#fff",color:"#374151",cursor:"pointer",fontSize:"0.75rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:5},children:[e.jsx($,{size:12})," Copiar URL"]}),e.jsxs("button",{onClick:()=>n(o.id),style:{width:"100%",padding:"8px",borderRadius:7,border:"1px solid #FECACA",backgroundColor:"#FEF2F2",color:"#EF4444",cursor:"pointer",fontSize:"0.75rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:5},children:[e.jsx(U,{size:12})," Eliminar"]})]})]}):e.jsxs("div",{style:{textAlign:"center",padding:"20px 0",color:"#9CA3AF"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:8},children:"ðŸ‘†"}),e.jsx("p",{style:{fontSize:"0.75rem",fontWeight:"600"},children:"SeleccionÃ¡ un archivo para ver sus propiedades"})]})}const v={fontSize:"0.6rem",fontWeight:"800",color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.08em",padding:"0 10px",marginBottom:4,marginTop:0},m={fontSize:"0.62rem",fontWeight:"700",color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 3px"};function de({onNavigate:o}){const[n,d]=x.useState([]),[c,l]=x.useState("all"),[t,j]=x.useState(""),[i,u]=x.useState("grid"),[g,b]=x.useState(null),[y,C]=x.useState(""),h=n.find(a=>a.id===g)??null,r=n.filter(a=>{const s=c==="all"||a.type===c,f=!t||a.collection===t;return s&&f}),p=a=>{Array.from(a).forEach(s=>{const f=new FileReader;f.onload=D=>{var B;const E=(B=D.target)==null?void 0:B.result,W={id:`asset-${Date.now()}-${Math.random().toString(36).slice(2)}`,name:s.name,type:w(s.type),size:s.size,date:new Date().toLocaleDateString("es-UY",{day:"2-digit",month:"2-digit",year:"numeric"}),url:E,thumbnail:w(s.type)==="image"?E:void 0,tags:[],collection:"General"};d(R=>[W,...R])},f.readAsDataURL(s)})},k=a=>{d(s=>s.filter(f=>f.id!==a)),g===a&&b(null)},T=a=>{const s=document.createElement("a");s.href=a.url,s.download=a.name,s.click()};return e.jsx(M,{toolId:"biblioteca",onNavigate:o,leftPanel:e.jsx(K,{filter:c,setFilter:l,collection:t,setCollection:j,assets:n}),canvas:e.jsx(V,{assets:r,viewMode:i,setViewMode:u,onUpload:p,onSelect:b,selectedId:g,onDelete:k,searchQuery:y,setSearchQuery:C}),properties:e.jsx(H,{asset:h,onDelete:k,onDownload:T}),actions:e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"0.7rem",color:"#71717A"},children:[n.length," archivos"]})})})}export{de as BibliotecaWorkspace};
