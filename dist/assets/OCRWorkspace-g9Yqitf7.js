const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B_RAjzga.js","assets/index-DpZjhHPo.js","assets/index-DH1dge0d.css"])))=>i.map(i=>d[i]);
import{r as p,_ as G,j as e,C as N}from"./index-DpZjhHPo.js";import{W as H}from"./WorkspaceShell-DnxIaPaL.js";import{C as I}from"./copy-A6Ikqb1o.js";import{C as Z}from"./circle-check-Bf3OLNcx.js";import{D as q}from"./download-CkvM2USS.js";import{U as J}from"./upload-B4yVmRFo.js";import{R as w}from"./refresh-cw-DotlCOZk.js";import{Z as V}from"./zap-DLTL4QpT.js";import"./arrow-left-Ds2SQtPR.js";import"./printer-DSXRaF5E.js";const W=[{id:"spa",label:"EspaÃ±ol",flag:"ðŸ‡ªðŸ‡¸"},{id:"eng",label:"InglÃ©s",flag:"ðŸ‡ºðŸ‡¸"},{id:"por",label:"PortuguÃ©s",flag:"ðŸ‡§ðŸ‡·"}];function K({lang:o,setLang:r,status:s,imageSrc:g,onUpload:n,onProcess:C,onReset:u}){const x=!!g&&(s==="idle"||s==="done"||s==="error"),l=s==="loading"||s==="processing";return e.jsxs("div",{style:{padding:"10px 12px"},children:[e.jsxs("button",{onClick:n,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:6,padding:"9px",borderRadius:8,border:"1.5px dashed #DDD6FE",backgroundColor:"#F5F3FF",color:"#8B5CF6",cursor:"pointer",fontSize:"0.75rem",fontWeight:"700",marginBottom:12},children:[e.jsx(J,{size:13})," Cargar imagen"]}),e.jsx("p",{style:Y,children:"Idioma"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:3,marginBottom:12},children:W.map(a=>e.jsxs("button",{onClick:()=>r(a.id),style:{display:"flex",alignItems:"center",gap:8,padding:"6px 10px",borderRadius:7,border:`1.5px solid ${o===a.id?"#8B5CF6":"#E5E7EB"}`,backgroundColor:o===a.id?"#F5F3FF":"#fff",color:o===a.id?"#7C3AED":"#374151",cursor:"pointer",fontSize:"0.75rem",fontWeight:o===a.id?"700":"500"},children:[e.jsx("span",{children:a.flag})," ",a.label]},a.id))}),e.jsx("div",{style:{height:1,backgroundColor:"#F3F4F6",margin:"10px 0"}}),e.jsx("button",{onClick:C,disabled:!x||l,style:{width:"100%",padding:"9px",borderRadius:8,border:"none",backgroundColor:x&&!l?"#8B5CF6":"#E5E7EB",color:x&&!l?"#fff":"#9CA3AF",cursor:x&&!l?"pointer":"not-allowed",fontSize:"0.78rem",fontWeight:"700",display:"flex",alignItems:"center",justifyContent:"center",gap:6,marginBottom:8},children:l?e.jsxs(e.Fragment,{children:[e.jsx(w,{size:12,style:{animation:"spin 1s linear infinite"}})," Procesandoâ€¦"]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{size:12})," Extraer texto"]})}),(s==="done"||s==="error")&&e.jsxs("button",{onClick:u,style:{width:"100%",padding:"7px",borderRadius:7,border:"1px solid #E5E7EB",backgroundColor:"#fff",color:"#6B7280",cursor:"pointer",fontSize:"0.72rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:5},children:[e.jsx(w,{size:11})," Nueva imagen"]}),e.jsx("div",{style:{height:1,backgroundColor:"#F3F4F6",margin:"12px 0"}}),e.jsxs("div",{style:{padding:"10px",backgroundColor:"#F9FAFB",borderRadius:8,border:"1px solid #E5E7EB"},children:[e.jsx("p",{style:{margin:"0 0 6px",fontSize:"0.62rem",fontWeight:"800",color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.06em"},children:"Consejos"}),["ImÃ¡genes con texto nÃ­tido dan mejores resultados","Fondo claro y texto oscuro es ideal","Facturas impresas: 90%+ precisiÃ³n","Fotos con perspectiva pueden reducir la precisiÃ³n"].map((a,d)=>e.jsxs("p",{style:{margin:"0 0 4px",fontSize:"0.65rem",color:"#9CA3AF",lineHeight:1.4},children:["Â· ",a]},d))]})]})}function Q({imageSrc:o,status:r,progress:s,progressStatus:g,result:n,extractedText:C,setExtractedText:u,onCopy:x,onDownload:l,errorMsg:a}){if(!o)return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",flexDirection:"column",gap:16,color:"#9CA3AF"},children:[e.jsx("div",{style:{width:72,height:72,borderRadius:16,backgroundColor:"#F5F3FF",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem"},children:"ðŸ”"}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{margin:"0 0 6px",fontWeight:"700",color:"#374151",fontSize:"0.9rem"},children:"Sin imagen cargada"}),e.jsx("p",{style:{margin:0,fontSize:"0.78rem"},children:'UsÃ¡ el botÃ³n "Cargar imagen" o arrastrÃ¡ un archivo'})]}),e.jsx("div",{style:{display:"flex",gap:10,fontSize:"0.72rem",color:"#9CA3AF"},children:["JPG","PNG","WEBP","BMP","TIFF"].map(y=>e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,backgroundColor:"#F5F3FF",color:"#8B5CF6",fontWeight:"600"},children:y},y))})]});const d=r==="loading"||r==="processing";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[r==="done"&&e.jsxs("div",{style:{height:44,backgroundColor:"#fff",borderBottom:"1px solid #E5E7EB",display:"flex",alignItems:"center",padding:"0 16px",gap:8,flexShrink:0},children:[e.jsx(Z,{size:14,color:"#10B981"}),e.jsx("span",{style:{fontSize:"0.78rem",fontWeight:"700",color:"#10B981"},children:"Texto extraÃ­do correctamente"}),e.jsx("div",{style:{flex:1}}),e.jsxs("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:5,padding:"5px 12px",borderRadius:6,border:"1px solid #E5E7EB",backgroundColor:"#fff",cursor:"pointer",fontSize:"0.72rem",fontWeight:"600",color:"#374151"},children:[e.jsx(I,{size:11})," Copiar texto"]}),e.jsxs("button",{onClick:l,style:{display:"flex",alignItems:"center",gap:5,padding:"5px 12px",borderRadius:6,border:"none",backgroundColor:"#8B5CF6",color:"#fff",cursor:"pointer",fontSize:"0.72rem",fontWeight:"700"},children:[e.jsx(q,{size:11})," Descargar .txt"]})]}),e.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden",position:"relative"},children:[e.jsxs("div",{style:{flex:"0 0 45%",borderRight:"1px solid #E5E7EB",overflow:"hidden",position:"relative",backgroundColor:"#E5E7EB",backgroundImage:"repeating-conic-gradient(#D1D5DB 0% 25%, transparent 0% 50%)",backgroundSize:"16px 16px"},children:[e.jsx("img",{src:o,alt:"OCR source",style:{width:"100%",height:"100%",objectFit:"contain",display:"block"}}),d&&e.jsxs("div",{style:{position:"absolute",inset:0,backgroundColor:"#000000cc",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:16},children:[e.jsx("div",{style:{fontSize:"2rem"},children:"ðŸ”"}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{margin:"0 0 8px",color:"#fff",fontWeight:"700",fontSize:"0.82rem"},children:g||"Inicializando Tesseract..."}),e.jsx("div",{style:{width:200,height:6,backgroundColor:"#ffffff30",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${s}%`,backgroundColor:"#8B5CF6",borderRadius:3,transition:"width 0.3s ease"}})}),e.jsxs("p",{style:{margin:"6px 0 0",color:"#A1A1AA",fontSize:"0.72rem"},children:[Math.round(s),"%"]})]})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",backgroundColor:"#fff"},children:[e.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #F3F4F6",display:"flex",alignItems:"center",gap:6,flexShrink:0},children:[e.jsx("span",{style:{fontSize:"0.62rem",fontWeight:"800",color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.06em"},children:"Texto extraÃ­do"}),r==="done"&&n&&e.jsxs("span",{style:{fontSize:"0.62rem",color:"#8B5CF6",fontWeight:"600",marginLeft:"auto"},children:[n.words," palabras Â· ",n.lines," lÃ­neas Â· ",n.confidence.toFixed(0),"% conf."]})]}),r==="error"&&e.jsxs("div",{style:{margin:12,padding:"10px 12px",backgroundColor:"#FEF2F2",border:"1px solid #FECACA",borderRadius:8,display:"flex",gap:8,alignItems:"flex-start"},children:[e.jsx(N,{size:14,color:"#EF4444",style:{flexShrink:0,marginTop:1}}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:"0 0 2px",fontSize:"0.75rem",fontWeight:"700",color:"#DC2626"},children:"Error al procesar"}),e.jsx("p",{style:{margin:0,fontSize:"0.7rem",color:"#EF4444"},children:a})]})]}),(r==="done"||r==="idle")&&e.jsx("textarea",{value:C,onChange:y=>u(y.target.value),placeholder:r==="idle"?"El texto extraÃ­do aparecerÃ¡ aquÃ­. PodÃ©s editarlo libremente...":"",style:{flex:1,border:"none",outline:"none",padding:"14px 16px",fontSize:"0.84rem",lineHeight:1.7,color:"#374151",resize:"none",fontFamily:"ui-monospace, SFMono-Regular, monospace",backgroundColor:"#fff"}}),d&&e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"#9CA3AF"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:8},children:"â³"}),e.jsx("p",{style:{fontSize:"0.78rem",fontWeight:"600"},children:"Analizando imagenâ€¦"})]})})]})]})]})}function X({result:o,status:r,lang:s}){const g=W.find(n=>n.id===s);return e.jsxs("div",{children:[e.jsx("p",{style:S,children:"Motor OCR"}),e.jsxs("div",{style:{marginBottom:12,padding:"8px 10px",backgroundColor:"#F5F3FF",borderRadius:8,border:"1px solid #DDD6FE"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"800",color:"#7C3AED"},children:"Tesseract.js"}),e.jsx("div",{style:{fontSize:"0.65rem",color:"#8B5CF6"},children:"100% browser Â· sin API Â· gratuito"})]}),e.jsx("p",{style:S,children:"Idioma activo"}),e.jsxs("div",{style:{marginBottom:12,padding:"6px 10px",backgroundColor:"#F9FAFB",borderRadius:7,border:"1px solid #E5E7EB",display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:"1rem"},children:g.flag}),e.jsx("span",{style:{fontSize:"0.78rem",fontWeight:"600",color:"#374151"},children:g.label})]}),o&&r==="done"?e.jsxs(e.Fragment,{children:[e.jsx("p",{style:S,children:"Resultados"}),[{l:"Confianza",v:`${o.confidence.toFixed(1)}%`,color:o.confidence>80?"#10B981":o.confidence>60?"#F59E0B":"#EF4444"},{l:"Palabras",v:o.words.toString(),color:"#374151"},{l:"LÃ­neas",v:o.lines.toString(),color:"#374151"},{l:"Tiempo",v:`${o.processingMs}ms`,color:"#374151"}].map(n=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"5px 8px",marginBottom:3,backgroundColor:"#F9FAFB",borderRadius:5},children:[e.jsx("span",{style:{fontSize:"0.72rem",color:"#6B7280"},children:n.l}),e.jsx("span",{style:{fontSize:"0.72rem",fontWeight:"800",color:n.color},children:n.v})]},n.l)),e.jsx("div",{style:{marginTop:12,padding:"8px 10px",borderRadius:8,backgroundColor:o.confidence>80?"#D1FAE5":o.confidence>60?"#FEF3C7":"#FEF2F2",border:`1px solid ${o.confidence>80?"#6EE7B7":o.confidence>60?"#FDE68A":"#FECACA"}`},children:e.jsx("div",{style:{fontSize:"0.68rem",fontWeight:"700",color:o.confidence>80?"#065F46":o.confidence>60?"#92400E":"#991B1B"},children:o.confidence>80?"âœ… Excelente calidad":o.confidence>60?"âš ï¸ Calidad aceptable":"âŒ Baja calidad â€” revisÃ¡ el texto"})})]}):e.jsxs("div",{style:{textAlign:"center",padding:"20px 0",color:"#D1D5DB"},children:[e.jsx("div",{style:{fontSize:"1.8rem",marginBottom:8},children:"ðŸ”"}),e.jsx("p",{style:{fontSize:"0.72rem",color:"#9CA3AF"},children:r==="idle"?'CargÃ¡ una imagen y presionÃ¡ "Extraer texto"':r==="loading"||r==="processing"?"Procesandoâ€¦":""})]})]})}const Y={fontSize:"0.6rem",fontWeight:"800",color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.08em",margin:"0 0 6px"},S={fontSize:"0.62rem",fontWeight:"700",color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 5px"};function ce({onNavigate:o}){const[r,s]=p.useState("spa"),[g,n]=p.useState(null),[C,u]=p.useState(null),[x,l]=p.useState("idle"),[a,d]=p.useState(0),[y,j]=p.useState(""),[E,b]=p.useState(null),[v,F]=p.useState(""),[P,T]=p.useState(""),[z,k]=p.useState(!1),B=p.useRef(null),A=i=>{const t=new FileReader;t.onload=f=>{var m;n((m=f.target)==null?void 0:m.result),u(i),l("idle"),b(null),F(""),d(0)},t.readAsDataURL(i)},L=p.useCallback(async()=>{var t,f;if(!g)return;l("loading"),d(0),j("Cargando Tesseract...");const i=Date.now();try{const{createWorker:m}=await G(async()=>{const{createWorker:c}=await import("./index-B_RAjzga.js").then($=>$.i);return{createWorker:c}},__vite__mapDeps([0,1,2])),D=await m(r,1,{logger:c=>{c.status==="loading tesseract core"||c.status==="initializing tesseract"?(j("Inicializando motor OCR..."),d(c.progress*20)):c.status==="loading language traineddata"?(j("Cargando modelo de idioma..."),d(20+c.progress*30)):c.status==="initializing api"?(j("Preparando API..."),d(50+c.progress*10)):c.status==="recognizing text"&&(l("processing"),j("Reconociendo texto..."),d(60+c.progress*40))}}),{data:h}=await D.recognize(g);await D.terminate();const U=((t=h.words)==null?void 0:t.length)??h.text.trim().split(/\s+/).filter(Boolean).length,_=((f=h.lines)==null?void 0:f.length)??h.text.trim().split(`
`).filter(c=>c.trim()).length;b({text:h.text,confidence:h.confidence,words:U,lines:_,processingMs:Date.now()-i}),F(h.text),l("done"),d(100)}catch(m){l("error"),T(m instanceof Error?m.message:"Error desconocido al procesar la imagen.")}},[g,r]),R=()=>{navigator.clipboard.writeText(v).catch(()=>{}),k(!0),setTimeout(()=>k(!1),1500)},M=()=>{const i=new Blob([v],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(i),f=document.createElement("a");f.href=t,f.download=`ocr-resultado-${Date.now()}.txt`,f.click(),URL.revokeObjectURL(t)},O=p.useCallback(i=>{i.preventDefault();const t=i.dataTransfer.files[0];t&&t.type.startsWith("image/")&&A(t)},[]);return e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:B,type:"file",accept:"image/*",style:{display:"none"},onChange:i=>{var f;const t=(f=i.target.files)==null?void 0:f[0];t&&A(t)}}),e.jsx(H,{toolId:"ocr",onNavigate:o,leftPanel:e.jsx(K,{lang:r,setLang:s,status:x,imageSrc:g,onUpload:()=>{var i;return(i=B.current)==null?void 0:i.click()},onProcess:L,onReset:()=>{n(null),u(null),l("idle"),b(null),F(""),d(0)}}),canvas:e.jsx("div",{style:{height:"100%"},onDragOver:i=>i.preventDefault(),onDrop:O,children:e.jsx(Q,{imageSrc:g,status:x,progress:a,progressStatus:y,result:E,extractedText:v,setExtractedText:F,onCopy:R,onDownload:M,errorMsg:P})}),properties:e.jsx(X,{result:E,status:x,lang:r}),actions:x==="done"?e.jsx("button",{onClick:R,style:{display:"flex",alignItems:"center",gap:4,padding:"4px 10px",borderRadius:5,border:"none",backgroundColor:z?"#10B981":"#8B5CF6",color:"#fff",cursor:"pointer",fontSize:"0.72rem",fontWeight:"700"},children:z?"âœ“ Copiado":e.jsxs(e.Fragment,{children:[e.jsx(I,{size:11})," Copiar"]})}):void 0})]})}export{ce as OCRWorkspace};
