import{e as O,p as P,r as h,t as v,j as e,Q as S,n as _,h as A,R as L,A as H,E as Q,l as D,G as $,k as G,d as U,s as V,u as Y,H as K,v as X,w as J,P as Z,F as ee,x as te,y as oe,z as ie,B as ne,m as re}from"./index-v6XgiFCH.js";import{O as ae}from"./OrangeHeader-B6pOaz2T.js";import{Q as R}from"./QrCodeDisplay-CyU_9CQx.js";import{R as se}from"./refresh-cw-DvQGl4jO.js";import{E as w}from"./eye-Ck8PAisl.js";import{U as le}from"./user-CXRttal9.js";import{C as de}from"./clock-BPmgSMOp.js";import{T as ce}from"./trash-2-D9Ho1ju3.js";import{A as pe}from"./arrow-left-DNcSMRM9.js";import{X as xe}from"./x-Bjgwm9Ul.js";import{P as ge}from"./printer-sosI-CAb.js";import{D as ue}from"./download-BWEPV093.js";import{C as me}from"./copy-CxAdpIF-.js";import{P as he}from"./plus-CsPaGdWE.js";import"./ConnectionStatusIcon-CQDd4n9w.js";import"./zap-CZ5J69Ph.js";import"./lightbulb-CD-WF-T3.js";import"./map-pin-HqaKhnQx.js";const T=`${O}/etiquetas`,I={"Content-Type":"application/json",Authorization:`Bearer ${P}`};async function fe(t){try{return await(await fetch(`${T}${t}`,{headers:I})).json()}catch(i){return console.error(`Etiquetas API GET ${t}:`,i),{ok:!1,error:String(i)}}}async function be(t,i){try{return await(await fetch(`${T}${t}`,{method:"POST",headers:I,body:i?JSON.stringify(i):void 0})).json()}catch(o){return console.error(`Etiquetas API POST ${t}:`,o),{ok:!1,error:String(o)}}}async function ye(t){try{return await(await fetch(`${T}${t}`,{method:"DELETE",headers:I})).json()}catch(i){return console.error(`Etiquetas API DELETE ${t}:`,i),{ok:!1,error:String(i)}}}async function je(){const t=await fe("");return!t.ok||!t.data?[]:Array.isArray(t.data)?t.data:[]}async function ve(t){const i=await be("",t);return!i.ok||!i.data?null:i.data}async function Ee(t){return(await ye(`/${t}`)).ok}const c="#FF6835",M=[{id:"gift",Icon:$,label:"Regalo",cat:"general"},{id:"heart",Icon:D,label:"Afecto",cat:"general"},{id:"star",Icon:G,label:"Celebraci√≥n",cat:"general"},{id:"sparkles",Icon:U,label:"Especial",cat:"general"},{id:"smile",Icon:V,label:"Amistad",cat:"general"},{id:"award",Icon:Y,label:"Logro",cat:"corporativo"},{id:"home",Icon:K,label:"Hogar",cat:"corporativo"},{id:"coffee",Icon:X,label:"Casual",cat:"general"},{id:"wine",Icon:J,label:"Gourmet",cat:"canastas"},{id:"package",Icon:Z,label:"Canasta",cat:"canastas"},{id:"flower",Icon:ee,label:"Natural",cat:"canastas"},{id:"treepine",Icon:te,label:"Navidad",cat:"fiestas"},{id:"cake",Icon:oe,label:"Cumplea√±os",cat:"fiestas"},{id:"sun",Icon:ie,label:"Verano",cat:"fiestas"},{id:"music",Icon:ne,label:"Fiesta",cat:"fiestas"},{id:"send",Icon:re,label:"Corporativo",cat:"corporativo"}],q={navidad:["{name}, que esta Navidad llegue cargada de todo lo que merec√©s. Con cari√±o, {remitente}","{name}, te enviamos este regalo con mucha gratitud. ¬°Felices Fiestas para vos y tu familia! {remitente}","{name}, gracias por ser parte de este a√±o especial. Que la magia de las fiestas ilumine tu hogar. {remitente}"],cumpleanos:["{name}, ¬°Feliz cumplea√±os! Este regalo viene con todo el cari√±o y los mejores deseos. {remitente}","{name}, hoy es tu d√≠a y queremos celebrarlo con vos. ¬°Que sea un a√±o lleno de logros! {remitente}","{name}, los a√±os te sientan de maravilla. ¬°Feliz cumplea√±os con todo nuestro afecto! {remitente}"],agradecimiento:["{name}, gracias por tu confianza y apoyo. Este detalle es una muestra de todo lo que signific√°s para nosotros. {remitente}","{name}, trabajar con vos es un genuino placer. Gracias por este a√±o compartido. {remitente}","{name}, tu apoyo hace la diferencia. Recib√≠ este regalo como s√≠mbolo de nuestra gratitud. {remitente}"],corporativo:["{name}, en nombre de todo el equipo, gracias por este a√±o. Seguimos construyendo juntos. {remitente}","{name}, valoramos enormemente tu relaci√≥n con nosotros. Que este detalle refleje nuestra estima. {remitente}","{name}, la confianza que depositaste en nosotros nos impulsa cada d√≠a. Muchas gracias. {remitente}"],general:["{name}, pensamos en vos al preparar este env√≠o. Esperamos que lo disfrutes. {remitente}","{name}, con mucho cari√±o para vos. Que llegue con toda la buena onda. {remitente}","{name}, este paquete viene cargado de cari√±o genuino. ¬°Que lo disfrutes! {remitente}"]},F=[{id:"general",label:"General"},{id:"navidad",label:"Navidad / Fiestas"},{id:"cumpleanos",label:"Cumplea√±os"},{id:"agradecimiento",label:"Agradecimiento"},{id:"corporativo",label:"Corporativo"}],z=[{id:"etiqueta",label:"Etiqueta T√©rmica",desc:"100√ó150 mm ‚Äî Impresi√≥n B&N",icon:ge},{id:"tarjeta",label:"Tarjeta / PDF",desc:"A6 color ‚Äî Para imprimir",icon:ue},{id:"embebido",label:"QR Embebido",desc:"Solo el c√≥digo para imprenta",icon:S}],B={pendiente:{label:"Sin escanear",color:"#D97706",bg:"#FFFBEB",icon:de},escaneada:{label:"Escaneada",color:"#2563EB",bg:"#EFF6FF",icon:w},respondida:{label:"Respondida",color:"#059669",bg:"#F0FDF4",icon:A}};function E(t){return new Date(t).toLocaleDateString("es-UY",{day:"2-digit",month:"short",year:"numeric"})}function Ce(t,i,o){return t.replace(/{name}/g,i||"destinatario").replace(/{remitente}/g,o||"Remitente")}function W({id:t,size:i=24,color:o="#111",strokeWidth:a=1.8}){const n=M.find(r=>r.id===t);if(!n)return e.jsx($,{size:i,color:o,strokeWidth:a});const{Icon:l}=n;return e.jsx(l,{size:i,color:o,strokeWidth:a})}function Je({onNavigate:t}){const[i,o]=h.useState("resumen"),[a,n]=h.useState([]),[l,r]=h.useState(!0),[s,p]=h.useState(null),u=h.useCallback(async()=>{r(!0);try{const d=await je();n(d)}catch{v.error("Error cargando etiquetas")}finally{r(!1)}},[]);h.useEffect(()=>{u()},[u]);const f=d=>{n(g=>[d,...g]),o("etiquetas"),v.success(`Etiqueta ${d.token} creada correctamente`)},b=async d=>{if(confirm(`¬øEliminar etiqueta ${d}?`))try{if(!await Ee(d))throw new Error("No se pudo eliminar");n(y=>y.filter(j=>j.token!==d)),v.success("Etiqueta eliminada")}catch{v.error("Error eliminando etiqueta")}},m={total:a.length,escaneadas:a.filter(d=>d.estado!=="pendiente").length,respondidas:a.filter(d=>d.estado==="respondida").length,optins:a.filter(d=>d.optin_contacto).length},x=[{id:"resumen",label:"Resumen"},{id:"etiquetas",label:"Mis Etiquetas"},{id:"nueva",label:"+ Nueva Etiqueta"}];return e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx(ae,{icon:S,title:"Etiqueta Emotiva",subtitle:"Mensajes personalizados con QR para tus env√≠os",actions:[{label:"‚Üê Marketing",onClick:()=>t("marketing")},{label:"Nueva Etiqueta",primary:!0,onClick:()=>o("nueva")}]}),e.jsxs("div",{style:{backgroundColor:"#fff",borderBottom:"1px solid #E5E7EB",display:"flex",padding:"0 28px",flexShrink:0},children:[x.map(d=>{const g=i===d.id;return e.jsx("button",{onClick:()=>o(d.id),style:{padding:"14px 20px",border:"none",borderBottom:`3px solid ${g?c:"transparent"}`,backgroundColor:"transparent",cursor:"pointer",fontSize:"14px",fontWeight:g?700:500,color:g?c:"#555",transition:"all 0.15s"},children:d.label},d.id)}),e.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",padding:"0 0 0 16px"},children:e.jsx("button",{onClick:u,style:{padding:"6px",border:"none",background:"none",cursor:"pointer",color:"#9CA3AF"},children:e.jsx(se,{size:15})})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",backgroundColor:"#F8F9FA"},children:[i==="resumen"&&e.jsx(Se,{etiquetas:a,kpis:m,loading:l,onVerDetalle:p,onNueva:()=>o("nueva")}),i==="etiquetas"&&e.jsx(ze,{etiquetas:a,loading:l,onDelete:b,onVerDetalle:p}),i==="nueva"&&e.jsx(Be,{onCreated:f,onCancel:()=>o("resumen")})]}),s&&e.jsx(Te,{etiqueta:s,onClose:()=>p(null)})]})}function Se({etiquetas:t,kpis:i,loading:o,onVerDetalle:a,onNueva:n}){const l=t.slice(0,6);return e.jsxs("div",{style:{padding:"28px"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"28px"},children:[{label:"Total enviadas",value:i.total,color:c,Icon:S},{label:"Escaneadas",value:i.escaneadas,color:"#2563EB",Icon:w},{label:"Respondidas",value:i.respondidas,color:"#059669",Icon:_},{label:"Opt-ins capturados",value:i.optins,color:"#8B5CF6",Icon:le}].map(r=>e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"14px",border:"1px solid #E5E7EB",padding:"20px",display:"flex",gap:"14px",alignItems:"center"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",backgroundColor:r.color+"18",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(r.Icon,{size:20,color:r.color,strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:800,color:"#111",lineHeight:1},children:r.value}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:r.label})]})]},r.label))}),i.total>0&&e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"14px",border:"1px solid #E5E7EB",padding:"20px",marginBottom:"24px",display:"flex",gap:"32px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"6px"},children:"Tasa de escaneo"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"160px",height:"8px",backgroundColor:"#F0F0F0",borderRadius:"4px"},children:e.jsx("div",{style:{height:"100%",borderRadius:"4px",backgroundColor:"#2563EB",width:`${Math.round(i.escaneadas/i.total*100)}%`}})}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:700,color:"#2563EB"},children:[Math.round(i.escaneadas/i.total*100),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"6px"},children:"Tasa de respuesta"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"160px",height:"8px",backgroundColor:"#F0F0F0",borderRadius:"4px"},children:e.jsx("div",{style:{height:"100%",borderRadius:"4px",backgroundColor:"#059669",width:`${Math.round(i.respondidas/i.total*100)}%`}})}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:700,color:"#059669"},children:[Math.round(i.respondidas/i.total*100),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"6px"},children:"Opt-in contacto"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"160px",height:"8px",backgroundColor:"#F0F0F0",borderRadius:"4px"},children:e.jsx("div",{style:{height:"100%",borderRadius:"4px",backgroundColor:"#8B5CF6",width:`${Math.round(i.optins/i.total*100)}%`}})}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:700,color:"#8B5CF6"},children:[Math.round(i.optins/i.total*100),"%"]})]})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:e.jsx("h2",{style:{margin:0,fontSize:"15px",fontWeight:800,color:"#111"},children:"Recientes"})}),o?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#9CA3AF"},children:"Cargando..."}):l.length===0?e.jsx(Ie,{onNueva:n}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:l.map(r=>e.jsx(Fe,{etiqueta:r,onVer:a},r.token))})]})}function Fe({etiqueta:t,onVer:i}){const o=B[t.estado],a=o.icon;return e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"14px",border:"1px solid #E5E7EB",padding:"18px",cursor:"pointer",transition:"all 0.15s"},onClick:()=>i(t),onMouseEnter:n=>{n.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.08)",n.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:n=>{n.currentTarget.style.boxShadow="none",n.currentTarget.style.transform="none"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"#FFF4EC",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(W,{id:t.icono,size:20,color:c})}),e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"3px 9px",borderRadius:"20px",fontSize:"11px",fontWeight:700,color:o.color,backgroundColor:o.bg},children:[e.jsx(a,{size:11}),o.label]})]}),e.jsx("div",{style:{fontWeight:700,fontSize:"13px",color:c,marginBottom:"2px"},children:t.token}),e.jsxs("div",{style:{fontSize:"13px",fontWeight:600,color:"#111",marginBottom:"4px"},children:["Para: ",t.destinatario_nombre]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",lineHeight:"1.4",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.mensaje}),t.respuesta&&e.jsxs("div",{style:{marginTop:"10px",padding:"8px 12px",backgroundColor:"#F0FDF4",borderRadius:"8px",border:"1px solid #BBF7D0"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:700,color:"#059669",marginBottom:"2px"},children:"üí¨ Respuesta recibida"}),e.jsx("div",{style:{fontSize:"11px",color:"#374151"},children:t.respuesta})]}),e.jsx("div",{style:{fontSize:"11px",color:"#9CA3AF",marginTop:"10px"},children:E(t.created_at)})]})}function ze({etiquetas:t,loading:i,onDelete:o,onVerDetalle:a}){const[n,l]=h.useState("todos"),r=n==="todos"?t:t.filter(s=>s.estado===n);return e.jsxs("div",{style:{padding:"28px"},children:[e.jsx("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:["todos","pendiente","escaneada","respondida"].map(s=>e.jsxs("button",{onClick:()=>l(s),style:{padding:"7px 16px",border:`1.5px solid ${n===s?c:"#E0E0E0"}`,borderRadius:"8px",backgroundColor:n===s?"#FFF4EC":"#fff",color:n===s?c:"#555",cursor:"pointer",fontSize:"13px",fontWeight:n===s?700:500},children:[s==="todos"?"Todas":B[s].label," ","(",s==="todos"?t.length:t.filter(p=>p.estado===s).length,")"]},s))}),i?e.jsx("div",{style:{textAlign:"center",padding:"60px",color:"#9CA3AF"},children:"Cargando..."}):r.length===0?e.jsx("div",{style:{textAlign:"center",padding:"60px",color:"#9CA3AF",fontSize:"14px"},children:"No hay etiquetas con ese filtro"}):e.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"14px",border:"1px solid #E5E7EB",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{backgroundColor:"#F9FAFB",borderBottom:"1.5px solid #E5E7EB"},children:["Token","Remitente ‚Üí Destinatario","Ocasi√≥n","Mensaje","Estado","Creada","QR",""].map(s=>e.jsx("th",{style:{padding:"12px 14px",textAlign:"left",fontSize:"12px",fontWeight:700,color:"#6B7280",whiteSpace:"nowrap"},children:s},s))})}),e.jsx("tbody",{children:r.map((s,p)=>{var b;const u=B[s.estado],f=u.icon;return e.jsxs("tr",{style:{borderBottom:p<r.length-1?"1px solid #F3F4F6":"none",cursor:"pointer"},onMouseEnter:m=>m.currentTarget.style.backgroundColor="#FAFAFA",onMouseLeave:m=>m.currentTarget.style.backgroundColor="transparent",children:[e.jsx("td",{style:{padding:"14px",fontWeight:700,fontSize:"13px",color:c},onClick:()=>a(s),children:s.token}),e.jsxs("td",{style:{padding:"14px"},onClick:()=>a(s),children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#111"},children:s.remitente_nombre}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280"},children:["‚Üí ",s.destinatario_nombre]})]}),e.jsx("td",{style:{padding:"14px",fontSize:"12px",color:"#555",textTransform:"capitalize"},onClick:()=>a(s),children:((b=F.find(m=>m.id===s.ocasion))==null?void 0:b.label)||s.ocasion}),e.jsx("td",{style:{padding:"14px",maxWidth:"200px"},onClick:()=>a(s),children:e.jsx("div",{style:{fontSize:"12px",color:"#374151",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:s.mensaje})}),e.jsx("td",{style:{padding:"14px"},onClick:()=>a(s),children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",fontSize:"11px",fontWeight:700,color:u.color,backgroundColor:u.bg},children:[e.jsx(f,{size:11}),u.label]})}),e.jsx("td",{style:{padding:"14px",fontSize:"12px",color:"#9CA3AF",whiteSpace:"nowrap"},onClick:()=>a(s),children:E(s.created_at)}),e.jsx("td",{style:{padding:"14px"},children:e.jsx(R,{value:`${window.location.origin}/m/${s.token}`,options:{size:48,margin:1},style:{borderRadius:"4px"}})}),e.jsx("td",{style:{padding:"14px"},children:e.jsx("button",{onClick:()=>o(s.token),style:{width:30,height:30,borderRadius:"8px",border:"1px solid #FEE2E2",backgroundColor:"#FFF5F5",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ce,{size:13,color:"#EF4444"})})})]},s.token)})})]})})]})}function Be({onCreated:t,onCancel:i}){const[o,a]=h.useState(1),[n,l]=h.useState(!1),[r,s]=h.useState({envio_numero:"",remitente_nombre:"",destinatario_nombre:"",destinatario_email:"",destinatario_tel:"",ocasion:"general",mensaje:"",icono:"gift",formato:"etiqueta"}),p=(x,d)=>s(g=>({...g,[x]:d})),u=(q[r.ocasion]||q.general).map(x=>Ce(x,r.destinatario_nombre,r.remitente_nombre)),f={1:!!(r.remitente_nombre&&r.destinatario_nombre),2:!!r.mensaje,3:!!(r.icono&&r.formato),4:!0},b=async()=>{l(!0);try{const x=await ve(r);if(!x)throw new Error("No se pudo crear la etiqueta");t(x)}catch(x){v.error(`Error al crear etiqueta: ${x}`)}finally{l(!1)}},m=["Destinatario","Mensaje","Visual","Vista previa"];return e.jsxs("div",{style:{padding:"28px",maxWidth:"820px",margin:"0 auto"},children:[e.jsx("div",{style:{marginBottom:"32px"},children:e.jsx("div",{style:{display:"flex",gap:"0"},children:m.map((x,d)=>{const g=d+1,y=o>g,j=o===g;return e.jsxs(L.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",flex:1},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:y?"#059669":j?c:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:y?e.jsx(A,{size:18,color:"#fff"}):e.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:j?"#fff":"#9CA3AF"},children:g})}),e.jsx("span",{style:{fontSize:"12px",fontWeight:j?700:500,color:j?c:y?"#059669":"#9CA3AF"},children:x})]}),d<m.length-1&&e.jsx("div",{style:{flex:1,height:"2px",marginTop:"17px",backgroundColor:y?"#059669":"#E5E7EB",transition:"all 0.2s"}})]},x)})})}),e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"16px",border:"1px solid #E5E7EB",padding:"32px",marginBottom:"24px"},children:[o===1&&e.jsx(ke,{form:r,set:p}),o===2&&e.jsx(Ae,{form:r,set:p,sugerencias:u}),o===3&&e.jsx(Re,{form:r,set:p}),o===4&&e.jsx(we,{form:r,saving:n,onSave:b})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("button",{onClick:o===1?i:()=>a(o-1),style:{display:"flex",alignItems:"center",gap:"6px",padding:"11px 20px",border:"1.5px solid #E0E0E0",borderRadius:"10px",backgroundColor:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:600,color:"#555"},children:[e.jsx(pe,{size:15})," ",o===1?"Cancelar":"Anterior"]}),o<4?e.jsxs("button",{onClick:()=>a(o+1),disabled:!f[o],style:{display:"flex",alignItems:"center",gap:"6px",padding:"11px 24px",border:"none",borderRadius:"10px",backgroundColor:f[o]?c:"#E5E7EB",color:f[o]?"#fff":"#9CA3AF",cursor:f[o]?"pointer":"default",fontSize:"14px",fontWeight:700},children:["Siguiente ",e.jsx(H,{size:15})]}):e.jsx("button",{onClick:b,disabled:n,style:{display:"flex",alignItems:"center",gap:"6px",padding:"11px 28px",border:"none",borderRadius:"10px",backgroundColor:n?"#E5E7EB":c,color:n?"#9CA3AF":"#fff",cursor:n?"default":"pointer",fontSize:"14px",fontWeight:700},children:n?"Guardando...":e.jsxs(e.Fragment,{children:[e.jsx(A,{size:16})," Crear Etiqueta"]})})]})]})}function ke({form:t,set:i}){return e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 6px",fontSize:"18px",fontWeight:800,color:"#111"},children:"¬øPara qui√©n es?"}),e.jsx("p",{style:{margin:"0 0 24px",fontSize:"14px",color:"#6B7280"},children:"Complet√° los datos del remitente y destinatario"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsx(C,{label:"Nombre del remitente *",value:t.remitente_nombre,onChange:o=>i("remitente_nombre",o),placeholder:"Ej: Charlie, Mar√≠a Garc√≠a..."}),e.jsx(C,{label:"N¬∞ de env√≠o (opcional)",value:t.envio_numero,onChange:o=>i("envio_numero",o),placeholder:"Ej: PEDX15000-ENV001"}),e.jsx(C,{label:"Nombre del destinatario *",value:t.destinatario_nombre,onChange:o=>i("destinatario_nombre",o),placeholder:"Ej: Sonnet, Pedro L√≥pez..."}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:700,color:"#374151",marginBottom:"6px"},children:"Ocasi√≥n"}),e.jsx("select",{value:t.ocasion,onChange:o=>i("ocasion",o.target.value),style:{width:"100%",padding:"10px 14px",border:"1.5px solid #E5E7EB",borderRadius:"10px",fontSize:"14px",color:"#111",backgroundColor:"#fff",outline:"none"},children:F.map(o=>e.jsx("option",{value:o.id,children:o.label},o.id))})]}),e.jsx(C,{label:"Email del destinatario (opcional)",value:t.destinatario_email,onChange:o=>i("destinatario_email",o),placeholder:"ejemplo@email.com",type:"email"}),e.jsx(C,{label:"Celular del destinatario (opcional)",value:t.destinatario_tel,onChange:o=>i("destinatario_tel",o),placeholder:"+598 99 123 456"})]})]})}function Ae({form:t,set:i,sugerencias:o}){var a;return e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 6px",fontSize:"18px",fontWeight:800,color:"#111"},children:"El mensaje"}),e.jsx("p",{style:{margin:"0 0 20px",fontSize:"14px",color:"#6B7280"},children:"Eleg√≠ una sugerencia y editala como quieras, o escrib√≠ uno propio"}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:700,color:"#374151",marginBottom:"10px"},children:['üí° Sugerencias para "',(a=F.find(n=>n.id===t.ocasion))==null?void 0:a.label,'"']}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:o.map((n,l)=>{const r=t.mensaje===n;return e.jsxs("button",{onClick:()=>i("mensaje",n),style:{padding:"14px 16px",border:`2px solid ${r?c:"#E5E7EB"}`,borderRadius:"12px",backgroundColor:r?"#FFF4EC":"#FAFAFA",cursor:"pointer",textAlign:"left",fontSize:"13px",color:"#374151",lineHeight:"1.55",transition:"all 0.15s",fontFamily:"inherit"},children:[e.jsxs("span",{style:{fontWeight:700,color:r?c:"#9CA3AF",marginRight:"8px"},children:[l+1,"."]}),n]},l)})})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:700,color:"#374151",marginBottom:"6px"},children:["Tu mensaje ",t.mensaje&&"(edit√° libremente)"]}),e.jsx("textarea",{value:t.mensaje,onChange:n=>i("mensaje",n.target.value),placeholder:"Escrib√≠ tu mensaje personalizado...",rows:4,style:{width:"100%",padding:"12px 14px",border:`1.5px solid ${t.mensaje?c:"#E5E7EB"}`,borderRadius:"10px",fontSize:"14px",color:"#111",resize:"vertical",outline:"none",fontFamily:"inherit",lineHeight:"1.55",boxSizing:"border-box",transition:"border-color 0.15s"}}),e.jsxs("div",{style:{fontSize:"12px",color:"#9CA3AF",marginTop:"4px",textAlign:"right"},children:[t.mensaje.length," caracteres"]})]})]})}function Re({form:t,set:i}){return e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 6px",fontSize:"18px",fontWeight:800,color:"#111"},children:"Visual e impresi√≥n"}),e.jsx("p",{style:{margin:"0 0 20px",fontSize:"14px",color:"#6B7280"},children:"Eleg√≠ un √≠cono para la etiqueta (optimizados para impresi√≥n t√©rmica B&N)"}),e.jsxs("div",{style:{marginBottom:"28px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:700,color:"#374151",marginBottom:"10px"},children:"√çcono"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gap:"10px"},children:M.map(({id:o,Icon:a,label:n})=>{const l=t.icono===o;return e.jsxs("button",{onClick:()=>i("icono",o),title:n,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"10px 8px",border:`2px solid ${l?c:"#E5E7EB"}`,borderRadius:"12px",backgroundColor:l?"#FFF4EC":"#FAFAFA",cursor:"pointer",transition:"all 0.15s"},children:[e.jsx(a,{size:24,color:l?c:"#6B7280",strokeWidth:1.8}),e.jsx("span",{style:{fontSize:"10px",color:l?c:"#9CA3AF",fontWeight:l?700:500},children:n})]},o)})})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:700,color:"#374151",marginBottom:"10px"},children:"Formato de salida"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:z.map(o=>{const a=t.formato===o.id,n=o.icon;return e.jsxs("button",{onClick:()=>i("formato",o.id),style:{padding:"18px",border:`2px solid ${a?c:"#E5E7EB"}`,borderRadius:"14px",backgroundColor:a?"#FFF4EC":"#FAFAFA",cursor:"pointer",textAlign:"left",transition:"all 0.15s"},children:[e.jsx(n,{size:22,color:a?c:"#9CA3AF",strokeWidth:1.8,style:{marginBottom:"10px"}}),e.jsx("div",{style:{fontWeight:700,fontSize:"13px",color:a?c:"#111"},children:o.label}),e.jsx("div",{style:{fontSize:"11px",color:"#9CA3AF",marginTop:"3px"},children:o.desc})]},o.id)})})]})]})}function we({form:t,saving:i,onSave:o}){var a,n,l;return e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 6px",fontSize:"18px",fontWeight:800,color:"#111"},children:"Vista previa"}),e.jsx("p",{style:{margin:"0 0 24px",fontSize:"14px",color:"#6B7280"},children:"As√≠ ver√° tu etiqueta. Al guardar se genera el QR √∫nico."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"28px",alignItems:"start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:700,color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"10px"},children:(a=z.find(r=>r.id===t.formato))==null?void 0:a.label}),e.jsx(N,{form:t})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:700,color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"10px"},children:"Resumen"}),e.jsx("div",{style:{backgroundColor:"#F9FAFB",borderRadius:"12px",border:"1px solid #E5E7EB",padding:"16px",display:"flex",flexDirection:"column",gap:"10px"},children:[{label:"Remitente",value:t.remitente_nombre},{label:"Destinatario",value:t.destinatario_nombre},{label:"Ocasi√≥n",value:(n=F.find(r=>r.id===t.ocasion))==null?void 0:n.label},{label:"Formato",value:(l=z.find(r=>r.id===t.formato))==null?void 0:l.label},{label:"Env√≠o",value:t.envio_numero||"‚Äî sin vincular"}].map(r=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:r.label}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:"#111"},children:r.value})]},r.label))}),e.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#EFF6FF",borderRadius:"10px",border:"1px solid #BFDBFE"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:700,color:"#2563EB",marginBottom:"3px"},children:"‚ÑπÔ∏è URL del mensaje"}),e.jsxs("div",{style:{fontSize:"11px",color:"#3B82F6",fontFamily:"monospace"},children:[window.location.origin,"/m/",e.jsx("strong",{children:"[token √∫nico]"})]})]})]})]})]})}function N({form:t,token:i}){return e.jsxs("div",{style:{border:"2px solid #111",borderRadius:"10px",padding:"20px",backgroundColor:"#fff",maxWidth:"280px",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"14px",paddingBottom:"12px",borderBottom:"1px dashed #ccc"},children:[e.jsx(W,{id:t.icono,size:28,color:"#111",strokeWidth:2}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"9px",fontWeight:700,letterSpacing:"0.08em",color:"#555"},children:"CHARLIE MARKETPLACE"}),e.jsx("div",{style:{fontSize:"11px",fontWeight:800,color:"#111"},children:"ETIQUETA EMOTIVA"})]})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("div",{style:{fontSize:"9px",color:"#888",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.06em"},children:"Para"}),e.jsx("div",{style:{fontSize:"15px",fontWeight:800,color:"#111"},children:t.destinatario_nombre||"Destinatario"})]}),e.jsxs("div",{style:{fontSize:"11px",color:"#333",lineHeight:"1.5",marginBottom:"14px",paddingBottom:"12px",borderBottom:"1px dashed #ccc",fontStyle:"italic"},children:['"',t.mensaje?t.mensaje.length>80?t.mensaje.slice(0,80)+"...":t.mensaje:"Tu mensaje aparecer√° aqu√≠...",'"']}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i?e.jsx(R,{value:`${window.location.origin}/m/${i}`,options:{size:60,margin:1},style:{borderRadius:"6px"}}):e.jsx("div",{style:{width:60,height:60,border:"2px dashed #ccc",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(S,{size:24,color:"#ccc"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"9px",fontWeight:700,color:"#555",textTransform:"uppercase",letterSpacing:"0.06em"},children:"Escaneame"}),e.jsx("div",{style:{fontSize:"9px",color:"#888",lineHeight:1.4},children:"Tengo un mensaje especial para vos"}),i&&e.jsx("div",{style:{fontSize:"9px",color:"#888",fontFamily:"monospace",marginTop:"2px"},children:i})]})]})]})}function Te({etiqueta:t,onClose:i}){var r,s;const o=B[t.estado],a=o.icon,n=`${window.location.origin}/m/${t.token}`,l=()=>{navigator.clipboard.writeText(n),v.success("Link copiado")};return e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"20px",width:"100%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",padding:"32px",position:"relative"},children:[e.jsx("button",{onClick:i,style:{position:"absolute",top:"20px",right:"20px",width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #E5E7EB",backgroundColor:"#F9FAFB",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(xe,{size:16,color:"#6B7280"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",backgroundColor:"#FFF4EC",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(W,{id:t.icono,size:24,color:c})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:800,fontSize:"20px",color:"#111"},children:t.token}),e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"3px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:700,color:o.color,backgroundColor:o.bg,marginTop:"4px"},children:[e.jsx(a,{size:12}),o.label]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"13px",color:"#6B7280",textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:"12px"},children:"Datos"}),[{label:"Remitente",value:t.remitente_nombre},{label:"Destinatario",value:t.destinatario_nombre},{label:"Email",value:t.destinatario_email||"‚Äî"},{label:"Tel√©fono",value:t.destinatario_tel||"‚Äî"},{label:"Ocasi√≥n",value:((r=F.find(p=>p.id===t.ocasion))==null?void 0:r.label)||t.ocasion},{label:"Formato",value:((s=z.find(p=>p.id===t.formato))==null?void 0:s.label)||t.formato},{label:"Env√≠o",value:t.envio_numero||"‚Äî sin vincular"},{label:"Creada",value:E(t.created_at)}].map(p=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #F3F4F6"},children:[e.jsx("span",{style:{fontSize:"13px",color:"#6B7280"},children:p.label}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:"#111"},children:p.value})]},p.label)),e.jsx("div",{style:{marginTop:"16px",fontWeight:700,fontSize:"13px",color:"#6B7280",textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:"10px"},children:"Tracking"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(k,{done:!0,icon:S,label:"Etiqueta creada",time:E(t.created_at)}),e.jsx(k,{done:t.estado!=="pendiente",icon:w,label:"Escaneada",time:t.scanned_at?E(t.scanned_at):void 0}),e.jsx(k,{done:t.estado==="respondida",icon:_,label:"Respondida",time:t.respondida_at?E(t.respondida_at):void 0})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"13px",color:"#6B7280",textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:"12px"},children:"QR Code"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx(R,{value:`${window.location.origin}/m/${t.token}`,options:{size:160,margin:2},style:{borderRadius:"10px",border:"1px solid #E5E7EB"}}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:l,style:{display:"flex",alignItems:"center",gap:"5px",padding:"7px 14px",border:"1.5px solid #E0E0E0",borderRadius:"8px",backgroundColor:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#555"},children:[e.jsx(me,{size:13})," Copiar link"]}),e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"5px",padding:"7px 14px",border:"1.5px solid #E0E0E0",borderRadius:"8px",backgroundColor:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#555",textDecoration:"none"},children:[e.jsx(Q,{size:13})," Ver p√°gina"]})]}),e.jsx("div",{style:{fontSize:"11px",color:"#9CA3AF",fontFamily:"monospace",textAlign:"center"},children:n})]}),e.jsx("div",{style:{fontWeight:700,fontSize:"13px",color:"#6B7280",textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:"8px"},children:"Mensaje"}),e.jsxs("div",{style:{backgroundColor:"#FFFBEB",borderRadius:"10px",border:"1px solid #FEF3C7",padding:"14px",fontSize:"13px",color:"#374151",lineHeight:"1.6",fontStyle:"italic"},children:['"',t.mensaje,'"']}),t.respuesta&&e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:"13px",color:"#6B7280",textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:"8px"},children:["Respuesta de ",t.respuesta_nombre]}),e.jsxs("div",{style:{backgroundColor:"#F0FDF4",borderRadius:"10px",border:"1px solid #BBF7D0",padding:"14px",fontSize:"13px",color:"#374151",lineHeight:"1.6"},children:['"',t.respuesta,'"']}),t.optin_contacto&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#059669",fontWeight:600},children:["üì± Opt-in capturado: ",t.optin_contacto]})]})]})]}),e.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"13px",color:"#6B7280",textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:"16px"},children:"Etiqueta"}),e.jsx(N,{form:t,token:t.token})]})]})})}function k({done:t,icon:i,label:o,time:a}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",opacity:t?1:.4},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:t?"#F0FDF4":"#F9FAFB",border:`1.5px solid ${t?"#10B981":"#E5E7EB"}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(i,{size:13,color:t?"#059669":"#9CA3AF",strokeWidth:2})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:t?"#111":"#9CA3AF"},children:o}),a&&e.jsx("span",{style:{fontSize:"11px",color:"#9CA3AF",marginLeft:"8px"},children:a})]})]})}function C({label:t,value:i,onChange:o,placeholder:a,type:n="text"}){return e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:700,color:"#374151",marginBottom:"6px"},children:t}),e.jsx("input",{type:n,value:i,onChange:l=>o(l.target.value),placeholder:a,style:{width:"100%",padding:"10px 14px",border:"1.5px solid #E5E7EB",borderRadius:"10px",fontSize:"14px",color:"#111",outline:"none",boxSizing:"border-box",fontFamily:"inherit",transition:"border-color 0.15s"},onFocus:l=>l.target.style.borderColor=c,onBlur:l=>l.target.style.borderColor="#E5E7EB"})]})}function Ie({onNueva:t}){return e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",backgroundColor:"#fff",borderRadius:"16px",border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"20px",backgroundColor:"#FFF4EC",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(D,{size:28,color:c,strokeWidth:1.5})}),e.jsx("div",{style:{fontWeight:800,fontSize:"18px",color:"#111",marginBottom:"8px"},children:"Todav√≠a no hay etiquetas"}),e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"24px"},children:"Cre√° tu primera Etiqueta Emotiva y hac√© que cada env√≠o cuente"}),e.jsxs("button",{onClick:t,style:{padding:"12px 24px",backgroundColor:c,color:"#fff",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"14px",fontWeight:700,display:"inline-flex",alignItems:"center",gap:"8px"},children:[e.jsx(he,{size:16})," Nueva Etiqueta"]})]})}export{Je as EtiquetaEmotivaView};
