import{c as M,r as c,t as x,j as e,h as me,S as ye,C as be}from"./index-uhFGGnVP.js";import{O as ve}from"./OrangeHeader-CqvKi3aq.js";import{g as je,u as F,c as Ce,d as Ee}from"./metodosPagoApi-sjmNwBLC.js";import{C as z}from"./credit-card-Cu9enBKm.js";import{C as Se}from"./circle-x-C9wk-lAr.js";import{Z as ke}from"./zap-AC53IqjL.js";import{C as $}from"./chevron-down-BUpR3zXf.js";import{B as Fe}from"./banknote-BcdvwsMG.js";import{G as ze}from"./globe-SRntvrmU.js";import{P as U}from"./percent-CYZQlmU0.js";import{P as Be}from"./pen-DXnFydc1.js";import{T as G}from"./trash-2-C5oMK7gx.js";import{X as K}from"./x-Bj3MJ53y.js";import{I as we}from"./info-BeRJDpOg.js";import{S as Ae}from"./save-BDA2gAzf.js";import{E as Ie}from"./eye-CCSX4XWe.js";import{L as Pe}from"./lock-CX6niNjK.js";import{R as Re}from"./refresh-cw-mGsUkaVi.js";import"./ConnectionStatusIcon-OHswN8K_.js";import"./lightbulb-ahu2D9ei.js";import"./map-pin-DbWFQf1N.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],De=M("chevron-up",Te);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]],We=M("landmark",Me);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],D=M("wallet",Ne),n="#FF6835",Oe=/^üí≥ Comisi√≥n: ([\d.]+)%\n?/;function P(g){if(!g)return{comision:"",instrucciones:""};const a=g.match(Oe);return a?{comision:a[1],instrucciones:g.replace(a[0],"")}:{comision:"",instrucciones:g}}function Le(g,a){const v=parseFloat(g);return(!isNaN(v)&&v>0?`üí≥ Comisi√≥n: ${v}%
`:"")+a}const X=[{id:"mercadopago",emoji:"üõí",nombre:"MercadoPago",tipo:"pasarela",proveedor:"mercadopago",descripcion:"Pag√° con tarjeta, dinero en cuenta o efectivo v√≠a MercadoPago",comision:"5.99",instrucciones:"Ser√°s redirigido al sitio de MercadoPago para completar tu pago de forma segura.",color:"#009EE3"},{id:"stripe",emoji:"üí≥",nombre:"Stripe",tipo:"pasarela",proveedor:"stripe",descripcion:"Tarjeta de cr√©dito/d√©bito internacional v√≠a Stripe",comision:"2.9",instrucciones:"Pag√° de forma segura con tu tarjeta Visa, Mastercard o American Express.",color:"#635BFF"},{id:"paypal",emoji:"üÖøÔ∏è",nombre:"PayPal",tipo:"pasarela",proveedor:"paypal",descripcion:"Pago internacional v√≠a cuenta PayPal",comision:"3.4",instrucciones:"Ser√°s redirigido a PayPal para completar tu pago.",color:"#003087"},{id:"transferencia",emoji:"üè¶",nombre:"Transferencia Bancaria",tipo:"transferencia",proveedor:"",descripcion:"Transferencia directa a cuenta bancaria",comision:"0",instrucciones:`Banco: 
CBU/CVU: 
Alias: 
Titular: 

Envi√° el comprobante por WhatsApp al confirmar el pedido.`,color:"#059669"},{id:"abitab",emoji:"üè™",nombre:"Abitab",tipo:"efectivo",proveedor:"abitab",descripcion:"Pago en efectivo en cualquier local Abitab del pa√≠s",comision:"0",instrucciones:"Al confirmar tu pedido recibir√°s el n√∫mero de operaci√≥n para abonar en cualquier local Abitab.",color:"#F5A623"},{id:"redpagos",emoji:"üî¥",nombre:"RedPagos",tipo:"efectivo",proveedor:"redpagos",descripcion:"Pago en efectivo en locales RedPagos",comision:"0",instrucciones:"Al confirmar tu pedido recibir√°s el c√≥digo para abonar en cualquier local RedPagos.",color:"#E30613"},{id:"efectivo",emoji:"üíµ",nombre:"Efectivo contra entrega",tipo:"efectivo",proveedor:"",descripcion:"Pag√°s en efectivo al recibir el pedido",comision:"0",instrucciones:"Por favor tener el monto exacto preparado al momento de la entrega.",color:"#6B7280"}],Y={transferencia:{placeholder:`Banco: 
CBU/CVU: 
Alias: 
Titular: 

Descripci√≥n adicional...`,infoBox:"Complet√° los datos bancarios para que el cliente pueda realizar la transferencia. Pedile que env√≠e el comprobante."},efectivo:{placeholder:"Ej: Tener el monto exacto. / Direcci√≥n: ... / Horario: ...",infoBox:"Indic√° c√≥mo y d√≥nde se realiza el pago en efectivo."},pasarela:{placeholder:"Mensaje al cliente sobre el proceso de pago online.",infoBox:"‚öôÔ∏è Las credenciales de API (Access Token, Public Key, etc.) se configuran como Variables de Entorno en el servidor ‚Äî no se guardan aqu√≠."},credito:{placeholder:"Informaci√≥n sobre financiaci√≥n, cuotas o condiciones."},otro:{placeholder:"Instrucciones para el cliente..."}},Z={pasarela:ze,transferencia:We,efectivo:Fe,credito:z,otro:D},J={mercadopago:"#009EE3",stripe:"#635BFF",paypal:"#003087",redpagos:"#E30613",abitab:"#F5A623",otro:"#6B7280"},Q=[{value:"pasarela",label:"Pasarela online"},{value:"transferencia",label:"Transferencia"},{value:"efectivo",label:"Efectivo"},{value:"credito",label:"Tarjeta de cr√©dito"},{value:"otro",label:"Otro"}],ee=[{value:"mercadopago",label:"MercadoPago"},{value:"stripe",label:"Stripe"},{value:"paypal",label:"PayPal"},{value:"redpagos",label:"RedPagos"},{value:"abitab",label:"Abitab"},{value:"otro",label:"Otro"}],oe=()=>({nombre:"",tipo:"pasarela",proveedor:"",descripcion:"",comision:"",instrucciones:"",activo:!0,orden:0});function xo({onNavigate:g}){const[a,v]=c.useState([]),[W,N]=c.useState(!0),[se,h]=c.useState(!1),[ae,B]=c.useState(!1),[j,w]=c.useState(null),[i,l]=c.useState(oe()),[A,O]=c.useState(!1),[L,H]=c.useState(!1),[I,S]=c.useState(null),[q,le]=c.useState(!0),y=c.useCallback(async()=>{N(!0);try{const o=await je();v(o)}catch(o){console.error("Error cargando m√©todos de pago:",o),x.error("Error al cargar m√©todos de pago")}finally{N(!1)}},[]);c.useEffect(()=>{y()},[y]);const ce=()=>{w(null),l(oe()),h(!0)},de=o=>{const{comision:r,instrucciones:t}=P(o.instrucciones);w(o.id),l({nombre:o.nombre,tipo:o.tipo,proveedor:o.proveedor??"",descripcion:o.descripcion??"",comision:r,instrucciones:t,activo:o.activo,orden:o.orden}),h(!0)},V=o=>{w(null),l({nombre:o.nombre,tipo:o.tipo,proveedor:o.proveedor,descripcion:o.descripcion,comision:o.comision,instrucciones:o.instrucciones,activo:!0,orden:a.length}),h(!0)},pe=o=>{l(r=>{var s;const t=((s=Y[o])==null?void 0:s.placeholder)??"";return{...r,tipo:o,instrucciones:r.instrucciones?r.instrucciones:t}})},ge=async()=>{if(!i.nombre.trim()){x.error("El nombre es requerido");return}O(!0);try{const o=Le(i.comision,i.instrucciones),r={nombre:i.nombre,tipo:i.tipo,proveedor:i.proveedor||null,descripcion:i.descripcion,instrucciones:o,activo:i.activo,orden:i.orden};if(j){if(!await F(j,r))throw new Error("No se pudo actualizar el m√©todo")}else if(!await Ce(r))throw new Error("No se pudo crear el m√©todo");x.success(j?"M√©todo actualizado":"M√©todo creado"),h(!1),y()}catch(o){console.error("Error guardando m√©todo:",o),x.error(`Error: ${o instanceof Error?o.message:o}`)}finally{O(!1)}},xe=async o=>{try{if(!await F(o.id,{activo:!o.activo}))throw new Error("No se pudo actualizar");x.success(o.activo?"M√©todo desactivado":"M√©todo activado"),y()}catch{x.error("Error al actualizar")}},ue=async o=>{try{if(!await Ee(o.id))throw new Error("No se pudo eliminar");x.success("M√©todo eliminado"),S(null),y()}catch{x.error("Error al eliminar")}},_=async(o,r)=>{const t=[...a].sort((b,C)=>b.orden-C.orden),s=t.findIndex(b=>b.id===o.id),p=r==="up"?s-1:s+1;if(p<0||p>=t.length)return;const f=t[p],k=o.orden;H(!0);try{await Promise.all([F(o.id,{orden:f.orden}),F(f.id,{orden:k})]),y()}catch{x.error("Error al reordenar")}finally{H(!1)}},u=[...a].sort((o,r)=>o.orden-r.orden),fe=a.filter(o=>o.activo).length,he=a.filter(o=>!o.activo).length,d=Y[i.tipo];return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[e.jsx(ve,{icon:z,title:"M√©todos de Pago",subtitle:"Configuraci√≥n de pasarelas y formas de pago disponibles",actions:[{label:"üëÅ Vista previa",primary:!1,onClick:()=>B(!0)},{label:"+ Nuevo M√©todo",primary:!0,onClick:ce}]}),e.jsx("div",{style:{padding:"12px 28px",backgroundColor:"#fff",borderBottom:"1px solid #E5E7EB",display:"flex",gap:12},children:[{label:"Total m√©todos",value:a.length,icon:z,color:n},{label:"Activos",value:fe,icon:me,color:"#059669"},{label:"Inactivos",value:he,icon:Se,color:"#EF4444"}].map(o=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"7px 14px",backgroundColor:"#F9FAFB",borderRadius:10,border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{width:32,height:32,borderRadius:8,backgroundColor:o.color+"18",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(o.icon,{size:15,color:o.color})}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"1.05rem",fontWeight:800,color:"#111827",lineHeight:1},children:o.value}),e.jsx("p",{style:{margin:0,fontSize:"0.7rem",color:"#6B7280"},children:o.label})]})]},o.label))}),e.jsxs("div",{style:{backgroundColor:"#FFFBF5",borderBottom:"1px solid #FEE9D7"},children:[e.jsxs("button",{onClick:()=>le(o=>!o),style:{width:"100%",padding:"8px 28px",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:8,textAlign:"left"},children:[e.jsx(ke,{size:14,color:n}),e.jsx("span",{style:{fontSize:"0.78rem",fontWeight:700,color:n},children:"Templates r√°pidos"}),e.jsx("span",{style:{fontSize:"0.72rem",color:"#9CA3AF",marginLeft:4},children:"‚Äî clic para agregar un m√©todo pre-configurado"}),e.jsx($,{size:14,color:n,style:{marginLeft:"auto",transform:q?"rotate(180deg)":"none",transition:"transform .2s"}})]}),q&&e.jsx("div",{style:{padding:"0 28px 14px",display:"flex",gap:10,flexWrap:"wrap"},children:X.map(o=>e.jsxs("button",{onClick:()=>V(o),style:{display:"flex",alignItems:"center",gap:8,padding:"8px 14px",borderRadius:10,border:`1.5px solid ${o.color}30`,backgroundColor:o.color+"10",cursor:"pointer",transition:"all .15s"},onMouseEnter:r=>r.currentTarget.style.backgroundColor=o.color+"22",onMouseLeave:r=>r.currentTarget.style.backgroundColor=o.color+"10",children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:o.emoji}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("p",{style:{margin:0,fontSize:"0.8rem",fontWeight:700,color:o.color},children:o.nombre}),parseFloat(o.comision)>0&&e.jsxs("p",{style:{margin:0,fontSize:"0.66rem",color:"#9CA3AF"},children:[o.comision,"% comisi√≥n"]})]})]},o.id))})]}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px 28px"},children:W?e.jsx(He,{}):u.length===0?e.jsx(qe,{onApplyTemplate:()=>V(X[0])}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(330px, 1fr))",gap:16},children:u.map((o,r)=>{var k,b;const t=Z[o.tipo]??D,s=J[o.proveedor??""]??"#6B7280",{comision:p,instrucciones:f}=P(o.instrucciones);return e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:14,border:`1.5px solid ${o.activo?"#E5E7EB":"#F3F4F6"}`,padding:20,display:"flex",flexDirection:"column",gap:12,opacity:o.activo?1:.65,boxShadow:o.activo?"0 1px 6px rgba(0,0,0,0.06)":"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx("button",{onClick:()=>_(o,"up"),disabled:r===0||L,style:{width:22,height:22,borderRadius:5,border:"1px solid #E5E7EB",background:r===0?"#F9FAFB":"#fff",cursor:r===0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:e.jsx(De,{size:12,color:r===0?"#D1D5DB":"#374151"})}),e.jsx("button",{onClick:()=>_(o,"down"),disabled:r===u.length-1||L,style:{width:22,height:22,borderRadius:5,border:"1px solid #E5E7EB",background:r===u.length-1?"#F9FAFB":"#fff",cursor:r===u.length-1?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:e.jsx($,{size:12,color:r===u.length-1?"#D1D5DB":"#374151"})})]}),e.jsx("div",{style:{width:44,height:44,borderRadius:12,backgroundColor:s+"18",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(t,{size:20,color:s})}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:700,color:"#111827",fontSize:"0.95rem"},children:o.nombre}),e.jsxs("div",{style:{display:"flex",gap:5,marginTop:4,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:"0.7rem",fontWeight:600,backgroundColor:"#F3F4F6",color:"#6B7280",padding:"2px 7px",borderRadius:20},children:((k=Q.find(C=>C.value===o.tipo))==null?void 0:k.label)??o.tipo}),o.proveedor&&e.jsx("span",{style:{fontSize:"0.7rem",fontWeight:700,backgroundColor:s+"18",color:s,padding:"2px 7px",borderRadius:20},children:((b=ee.find(C=>C.value===o.proveedor))==null?void 0:b.label)??o.proveedor}),p&&parseFloat(p)>0&&e.jsxs("span",{style:{fontSize:"0.7rem",fontWeight:700,backgroundColor:"#FFF7ED",color:n,padding:"2px 7px",borderRadius:20,display:"flex",alignItems:"center",gap:3},children:[e.jsx(U,{size:9})," ",p,"%"]})]})]})]}),e.jsx("button",{onClick:()=>xe(o),style:{padding:"4px 10px",borderRadius:20,border:"none",cursor:"pointer",fontSize:"0.72rem",fontWeight:700,backgroundColor:o.activo?"#D1FAE5":"#FEE2E2",color:o.activo?"#059669":"#DC2626",flexShrink:0,whiteSpace:"nowrap"},children:o.activo?"‚óè Activo":"‚óè Inactivo"})]}),o.descripcion&&e.jsx("p",{style:{margin:0,fontSize:"0.82rem",color:"#6B7280",lineHeight:1.5},children:o.descripcion}),f&&e.jsx("div",{style:{padding:"8px 12px",backgroundColor:"#FFFBEB",borderRadius:8,border:"1px solid #FDE68A"},children:e.jsxs("p",{style:{margin:0,fontSize:"0.76rem",color:"#92400E",whiteSpace:"pre-line",lineHeight:1.6},children:[e.jsx("strong",{children:"Instrucciones:"}),`
`,f]})}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:4},children:[e.jsxs("button",{onClick:()=>de(o),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:5,padding:"7px 0",borderRadius:8,border:"1.5px solid #E5E7EB",background:"#F9FAFB",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,color:"#374151"},children:[e.jsx(Be,{size:13})," Editar"]}),e.jsx("button",{onClick:()=>S(o),style:{width:36,height:36,borderRadius:8,border:"1.5px solid #FEE2E2",background:"#FFF5F5",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(G,{size:14,color:"#DC2626"})})]})]},o.id)})})}),se&&e.jsx("div",{style:R,onClick:()=>h(!1),children:e.jsxs("div",{style:{...T,maxWidth:540},onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:re,children:[e.jsx("h2",{style:{margin:0,fontSize:"1.05rem",fontWeight:700,color:"#111827"},children:j?"Editar m√©todo de pago":"Nuevo m√©todo de pago"}),e.jsx("button",{onClick:()=>h(!1),style:ie,children:e.jsx(K,{size:18})})]}),e.jsxs("div",{style:{padding:"20px 24px",display:"flex",flexDirection:"column",gap:14,maxHeight:"70vh",overflowY:"auto"},children:[e.jsxs("div",{children:[e.jsx("label",{style:m,children:"Nombre *"}),e.jsx("input",{value:i.nombre,onChange:o=>l(r=>({...r,nombre:o.target.value})),style:E,placeholder:"Ej: MercadoPago, Transferencia Bancaria‚Ä¶"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{style:m,children:"Tipo *"}),e.jsx("select",{value:i.tipo,onChange:o=>pe(o.target.value),style:ne,children:Q.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:m,children:"Proveedor"}),e.jsxs("select",{value:i.proveedor,onChange:o=>l(r=>({...r,proveedor:o.target.value})),style:ne,children:[e.jsx("option",{value:"",children:"‚Äî Sin proveedor ‚Äî"}),ee.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:m,children:"Descripci√≥n visible al cliente"}),e.jsx("input",{value:i.descripcion,onChange:o=>l(r=>({...r,descripcion:o.target.value})),style:E,placeholder:"Breve descripci√≥n del m√©todo de pago"})]}),e.jsxs("div",{children:[e.jsx("label",{style:m,children:"Comisi√≥n del proveedor (%)"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:i.comision,onChange:o=>l(r=>({...r,comision:o.target.value})),style:{...E,paddingRight:36},placeholder:"Ej: 3.5 (dejar vac√≠o si es gratis)"}),e.jsx(U,{size:14,color:"#9CA3AF",style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)"}})]}),e.jsx("p",{style:{margin:"4px 0 0",fontSize:"0.72rem",color:"#9CA3AF"},children:"Comisi√≥n que el proveedor cobra por transacci√≥n. Solo informativo."})]}),(d==null?void 0:d.infoBox)&&e.jsxs("div",{style:{padding:"10px 14px",backgroundColor:"#EFF6FF",borderRadius:8,border:"1px solid #BFDBFE",display:"flex",gap:8},children:[e.jsx(we,{size:15,color:"#3B82F6",style:{flexShrink:0,marginTop:1}}),e.jsx("p",{style:{margin:0,fontSize:"0.78rem",color:"#1E40AF",lineHeight:1.5},children:d.infoBox})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:5},children:[e.jsx("label",{style:{...m,margin:0},children:"Instrucciones de pago"}),(d==null?void 0:d.placeholder)&&!i.instrucciones&&e.jsx("button",{onClick:()=>l(o=>({...o,instrucciones:d.placeholder})),style:{fontSize:"0.7rem",color:n,background:"none",border:"none",cursor:"pointer",fontWeight:600},children:"+ Template"})]}),e.jsx("textarea",{value:i.instrucciones,onChange:o=>l(r=>({...r,instrucciones:o.target.value})),style:{...E,height:90,paddingTop:8,resize:"vertical"},placeholder:(d==null?void 0:d.placeholder)??"Instrucciones para el cliente‚Ä¶"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{style:m,children:"Orden de visualizaci√≥n"}),e.jsx("input",{type:"number",value:i.orden,onChange:o=>l(r=>({...r,orden:parseInt(o.target.value)||0})),style:E,min:0})]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end",paddingBottom:2},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"0.875rem",color:"#374151"},children:[e.jsx("input",{type:"checkbox",checked:i.activo,onChange:o=>l(r=>({...r,activo:o.target.checked})),style:{width:16,height:16,accentColor:n}}),"M√©todo activo"]})})]})]}),e.jsxs("div",{style:Ve,children:[e.jsx("button",{onClick:()=>h(!1),style:te,children:"Cancelar"}),e.jsxs("button",{onClick:ge,disabled:A,style:{..._e,opacity:A?.7:1},children:[e.jsx(Ae,{size:14})," ",A?"Guardando‚Ä¶":j?"Actualizar":"Crear m√©todo"]})]})]})}),ae&&e.jsx("div",{style:R,onClick:()=>B(!1),children:e.jsxs("div",{style:{...T,maxWidth:480},onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:re,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(Ie,{size:16,color:n}),e.jsx("h2",{style:{margin:0,fontSize:"1rem",fontWeight:700,color:"#111827"},children:"Vista previa ‚Äî Checkout"})]}),e.jsx("button",{onClick:()=>B(!1),style:ie,children:e.jsx(K,{size:18})})]}),e.jsxs("div",{style:{padding:24},children:[e.jsxs("div",{style:{backgroundColor:"#F9FAFB",borderRadius:12,border:"1px solid #E5E7EB",overflow:"hidden"},children:[e.jsxs("div",{style:{backgroundColor:n,padding:"12px 16px",display:"flex",alignItems:"center",gap:8},children:[e.jsx(ye,{size:16,color:"#fff"}),e.jsx("span",{style:{color:"#fff",fontWeight:700,fontSize:"0.9rem"},children:"Forma de pago"})]}),e.jsx("div",{style:{padding:16,display:"flex",flexDirection:"column",gap:10},children:u.filter(o=>o.activo).length===0?e.jsxs("div",{style:{textAlign:"center",padding:"24px 0",color:"#9CA3AF"},children:[e.jsx(be,{size:28,style:{marginBottom:8,opacity:.4}}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem"},children:"No hay m√©todos activos"})]}):u.filter(o=>o.activo).map((o,r)=>{const t=Z[o.tipo]??D,s=J[o.proveedor??""]??"#6B7280",{comision:p,instrucciones:f}=P(o.instrucciones);return e.jsxs("label",{style:{display:"flex",gap:12,padding:"12px 14px",backgroundColor:"#fff",border:`1.5px solid ${r===0?n:"#E5E7EB"}`,borderRadius:10,cursor:"pointer",boxShadow:r===0?`0 0 0 3px ${n}22`:"none"},children:[e.jsx("div",{style:{paddingTop:2},children:e.jsx("div",{style:{width:18,height:18,borderRadius:"50%",border:`2px solid ${r===0?n:"#D1D5DB"}`,display:"flex",alignItems:"center",justifyContent:"center"},children:r===0&&e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:n}})})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:7},children:[e.jsx("div",{style:{width:28,height:28,borderRadius:7,backgroundColor:s+"18",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(t,{size:14,color:s})}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.88rem",color:"#111827"},children:o.nombre})]}),p&&parseFloat(p)>0&&e.jsxs("span",{style:{fontSize:"0.68rem",color:"#6B7280",whiteSpace:"nowrap"},children:["+",p,"%"]})]}),o.descripcion&&e.jsx("p",{style:{margin:"4px 0 0",fontSize:"0.75rem",color:"#6B7280"},children:o.descripcion}),r===0&&f&&e.jsx("div",{style:{marginTop:8,padding:"8px 10px",backgroundColor:"#FFFBEB",borderRadius:7,border:"1px solid #FDE68A"},children:e.jsx("p",{style:{margin:0,fontSize:"0.72rem",color:"#92400E",whiteSpace:"pre-line",lineHeight:1.5},children:f})})]})]},o.id)})}),e.jsx("div",{style:{padding:"0 16px 16px"},children:e.jsxs("button",{style:{width:"100%",padding:"12px 0",borderRadius:10,border:"none",backgroundColor:n,color:"#fff",fontWeight:700,fontSize:"0.95rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx(Pe,{size:15})," Confirmar pedido"]})})]}),e.jsxs("p",{style:{margin:"12px 0 0",fontSize:"0.75rem",color:"#9CA3AF",textAlign:"center"},children:["Solo se muestran los m√©todos ",e.jsx("strong",{children:"activos"}),", en el orden configurado."]})]})]})}),I&&e.jsx("div",{style:R,onClick:()=>S(null),children:e.jsx("div",{style:{...T,maxWidth:420},onClick:o=>o.stopPropagation(),children:e.jsxs("div",{style:{padding:28,textAlign:"center",display:"flex",flexDirection:"column",gap:14,alignItems:"center"},children:[e.jsx("div",{style:{width:52,height:52,borderRadius:"50%",backgroundColor:"#FEE2E2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(G,{size:24,color:"#DC2626"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:700,color:"#111827"},children:"¬øEliminar m√©todo?"}),e.jsxs("p",{style:{margin:"6px 0 0",fontSize:"0.875rem",color:"#6B7280"},children:["Se eliminar√° ",e.jsx("strong",{children:I.nombre}),". Esta acci√≥n no se puede deshacer."]})]}),e.jsxs("div",{style:{display:"flex",gap:10,width:"100%"},children:[e.jsx("button",{onClick:()=>S(null),style:{...te,flex:1},children:"Cancelar"}),e.jsx("button",{onClick:()=>ue(I),style:{flex:1,padding:"9px 0",borderRadius:8,border:"none",backgroundColor:"#DC2626",color:"#fff",cursor:"pointer",fontWeight:700,fontSize:"0.875rem"},children:"Eliminar"})]})]})})})]})}function He(){return e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:200,color:"#9CA3AF"},children:[e.jsx(Re,{size:18,style:{animation:"spin 1s linear infinite",marginRight:8}})," Cargando‚Ä¶",e.jsx("style",{children:"@keyframes spin { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }"})]})}function qe({onApplyTemplate:g}){return e.jsxs("div",{style:{textAlign:"center",padding:"60px 0",color:"#9CA3AF"},children:[e.jsx(z,{size:44,style:{marginBottom:12,opacity:.25}}),e.jsx("p",{style:{fontSize:"1rem",fontWeight:600,margin:0,color:"#374151"},children:"No hay m√©todos de pago"}),e.jsx("p",{style:{fontSize:"0.875rem",marginTop:6},children:"Us√° los templates de arriba o hac√© clic aqu√≠:"}),e.jsx("button",{onClick:g,style:{marginTop:10,padding:"9px 20px",borderRadius:8,border:"none",backgroundColor:n,color:"#fff",fontWeight:700,fontSize:"0.875rem",cursor:"pointer"},children:"üõí Agregar MercadoPago"})]})}const R={position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:20},T={backgroundColor:"#fff",borderRadius:16,width:"100%",maxWidth:500,boxShadow:"0 20px 60px rgba(0,0,0,0.25)"},re={padding:"18px 24px",borderBottom:"1px solid #E5E7EB",display:"flex",alignItems:"center",justifyContent:"space-between"},Ve={padding:"14px 24px",borderTop:"1px solid #E5E7EB",display:"flex",justifyContent:"flex-end",gap:10},ie={background:"none",border:"none",cursor:"pointer",color:"#9CA3AF"},m={display:"block",fontSize:"0.8rem",fontWeight:600,color:"#374151",marginBottom:5},E={width:"100%",height:36,border:"1.5px solid #E5E7EB",borderRadius:8,padding:"0 10px",fontSize:"0.84rem",color:"#111827",outline:"none",boxSizing:"border-box"},ne={width:"100%",height:36,border:"1.5px solid #E5E7EB",borderRadius:8,padding:"0 10px",fontSize:"0.84rem",color:"#374151",cursor:"pointer",outline:"none",boxSizing:"border-box"},te={padding:"9px 20px",borderRadius:8,border:"1.5px solid #E5E7EB",background:"#fff",cursor:"pointer",fontSize:"0.875rem",fontWeight:600,color:"#374151"},_e={padding:"9px 22px",borderRadius:8,border:"none",backgroundColor:n,color:"#fff",cursor:"pointer",fontSize:"0.875rem",fontWeight:700,display:"flex",alignItems:"center",gap:6};export{xo as MetodosPagoView};
