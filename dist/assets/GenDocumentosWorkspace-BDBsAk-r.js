import{c as S,r as C,j as e}from"./index-p8CpflSp.js";import{W as _}from"./WorkspaceShell-QEpheufk.js";import{D as F}from"./download-D7P4fZTM.js";import{P as k}from"./pen-line-D-DRwwQz.js";import{I as z}from"./image-D9NWwG0E.js";import{M as D}from"./minus-Dk6PHtCu.js";import{L as W}from"./list-kPXno--S.js";import{T}from"./type-DiYvbGHY.js";import"./arrow-left-tS0HRs_M.js";import"./printer-CLwASCiH.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],M=S("heading-1",R);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],I=S("heading-2",L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],P=S("table",q),H={h1:M,h2:I,paragraph:T,list:W,divider:D,image:z,table:P,signature:k},B={h1:"TÃ­tulo 1",h2:"TÃ­tulo 2",paragraph:"PÃ¡rrafo",list:"Lista",divider:"Separador",image:"Imagen",table:"Tabla",signature:"Firma"};function j(t){return{id:`blk-${Date.now()}-${Math.random().toString(36).slice(2)}`,type:t,...{h1:{content:"TÃ­tulo Principal"},h2:{content:"SubtÃ­tulo"},paragraph:{content:"EscribÃ­ tu texto aquÃ­. HacÃ© clic para editar."},list:{content:"",items:["Ãtem 1","Ãtem 2","Ãtem 3"]},divider:{content:""},image:{content:""},table:{content:"",rows:[["Columna 1","Columna 2","Columna 3"],["","",""],["","",""]]},signature:{content:"Firma: ________________________"}}[t]}}function N({docTitle:t,setDocTitle:o,onAdd:u,blockCount:a}){const c=[{type:"h1",emoji:"ðŸ“°"},{type:"h2",emoji:"ðŸ“Œ"},{type:"paragraph",emoji:"âœï¸"},{type:"list",emoji:"ðŸ“‹"},{type:"divider",emoji:"ã€°ï¸"},{type:"image",emoji:"ðŸ–¼ï¸"},{type:"table",emoji:"ðŸ“Š"},{type:"signature",emoji:"âœï¸"}];return e.jsxs("div",{style:{padding:"10px 12px"},children:[e.jsx("p",{style:f,children:"Documento"}),e.jsx("input",{value:t,onChange:d=>o(d.target.value),placeholder:"Nombre del documento",style:G}),e.jsx("p",{style:f,children:"Insertar bloque"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:3},children:c.map(d=>{const x=H[d.type];return e.jsxs("button",{onClick:()=>u(d.type),style:{display:"flex",alignItems:"center",gap:8,padding:"7px 10px",borderRadius:7,border:"1px solid #E5E7EB",backgroundColor:"#fff",cursor:"pointer",fontSize:"0.75rem",color:"#374151",fontWeight:"500",transition:"all 0.12s"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="#FFF4F0",i.currentTarget.style.borderColor="#FF6835",i.currentTarget.style.color="#FF6835"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="#fff",i.currentTarget.style.borderColor="#E5E7EB",i.currentTarget.style.color="#374151"},children:[e.jsx(x,{size:13}),B[d.type]]},d.type)})}),e.jsx("div",{style:{height:1,backgroundColor:"#F3F4F6",margin:"12px 0"}}),e.jsx("p",{style:f,children:"Formato de pÃ¡gina"}),["A4","A5","Letter"].map(d=>e.jsx("button",{style:{marginRight:4,padding:"4px 9px",borderRadius:5,border:"1px solid #E5E7EB",backgroundColor:"#F9FAFB",cursor:"pointer",fontSize:"0.68rem",fontWeight:"600",color:"#374151"},children:d},d)),e.jsx("div",{style:{marginTop:10},children:e.jsxs("p",{style:{...f,marginBottom:2},children:["Bloques: ",e.jsx("strong",{style:{color:"#374151"},children:a})]})})]})}function O({block:t,onUpdate:o,onDelete:u,onMove:a,isFirst:c,isLast:d}){const[x,i]=C.useState(!1),y={position:"relative",borderRadius:6,padding:"4px",transition:"all 0.12s"},s=n=>e.jsxs("div",{style:y,onMouseEnter:r=>{var l;(l=r.currentTarget.querySelector(".blk-ctrl"))==null||l.setAttribute("style","display:flex")},onMouseLeave:r=>{var l;(l=r.currentTarget.querySelector(".blk-ctrl"))==null||l.setAttribute("style","display:none")},children:[e.jsxs("div",{className:"blk-ctrl",style:{display:"none",position:"absolute",top:0,right:0,gap:3,padding:3,zIndex:2},children:[e.jsx("button",{onClick:()=>!c&&a(t.id,-1),disabled:c,style:v,children:"â†‘"}),e.jsx("button",{onClick:()=>!d&&a(t.id,1),disabled:d,style:v,children:"â†“"}),e.jsx("button",{onClick:()=>u(t.id),style:{...v,color:"#EF4444"},children:"âœ•"})]}),n]});return t.type==="h1"?s(x?e.jsx("input",{value:t.content,autoFocus:!0,onChange:n=>o({...t,content:n.target.value}),onBlur:()=>i(!1),style:{width:"100%",fontSize:"1.8rem",fontWeight:"800",border:"none",outline:"2px solid #FF6835",borderRadius:4,padding:"2px 4px",fontFamily:"inherit",boxSizing:"border-box"}}):e.jsx("h1",{onClick:()=>i(!0),style:{fontSize:"1.8rem",fontWeight:"800",margin:"0 0 4px",cursor:"text",color:"#111827"},children:t.content})):t.type==="h2"?s(x?e.jsx("input",{value:t.content,autoFocus:!0,onChange:n=>o({...t,content:n.target.value}),onBlur:()=>i(!1),style:{width:"100%",fontSize:"1.3rem",fontWeight:"700",border:"none",outline:"2px solid #FF6835",borderRadius:4,padding:"2px 4px",fontFamily:"inherit",boxSizing:"border-box"}}):e.jsx("h2",{onClick:()=>i(!0),style:{fontSize:"1.3rem",fontWeight:"700",margin:"0 0 4px",cursor:"text",color:"#1F2937"},children:t.content})):t.type==="paragraph"?s(x?e.jsx("textarea",{value:t.content,autoFocus:!0,onChange:n=>o({...t,content:n.target.value}),onBlur:()=>i(!1),style:{width:"100%",fontSize:"0.9rem",border:"none",outline:"2px solid #FF6835",borderRadius:4,padding:"2px 4px",fontFamily:"inherit",resize:"vertical",minHeight:60,boxSizing:"border-box",lineHeight:1.6}}):e.jsx("p",{onClick:()=>i(!0),style:{fontSize:"0.9rem",margin:"0 0 4px",cursor:"text",color:"#374151",lineHeight:1.6},children:t.content})):t.type==="list"?s(e.jsxs("ul",{style:{paddingLeft:20,margin:"0 0 4px"},children:[(t.items??[]).map((n,r)=>e.jsx("li",{style:{fontSize:"0.9rem",color:"#374151",lineHeight:1.6},children:e.jsx("input",{value:n,onChange:l=>{const p=[...t.items??[]];p[r]=l.target.value,o({...t,items:p})},style:{border:"none",outline:"none",width:"90%",fontSize:"0.9rem",fontFamily:"inherit",color:"#374151",background:"transparent"}})},r)),e.jsx("li",{style:{listStyle:"none"},children:e.jsx("button",{onClick:()=>o({...t,items:[...t.items??[],""]}),style:{border:"none",background:"none",color:"#9CA3AF",cursor:"pointer",fontSize:"0.75rem"},children:"+ agregar Ã­tem"})})]})):t.type==="divider"?s(e.jsx("hr",{style:{border:"none",borderTop:"2px solid #E5E7EB",margin:"8px 0"}})):t.type==="image"?s(e.jsx("div",{style:{border:"2px dashed #E5E7EB",borderRadius:8,padding:"20px",textAlign:"center",color:"#9CA3AF",cursor:"pointer"},onClick:()=>{const n=document.createElement("input");n.type="file",n.accept="image/*",n.onchange=r=>{var p;const l=(p=r.target.files)==null?void 0:p[0];if(l){const h=new FileReader;h.onload=g=>{var m;return o({...t,content:(m=g.target)==null?void 0:m.result})},h.readAsDataURL(l)}},n.click()},children:t.content?e.jsx("img",{src:t.content,alt:"img",style:{maxWidth:"100%",maxHeight:200,borderRadius:6}}):e.jsxs(e.Fragment,{children:[e.jsx(z,{size:24}),e.jsx("p",{style:{fontSize:"0.78rem",margin:"6px 0 0"},children:"Clic para insertar imagen"})]})})):t.type==="table"?s(e.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:e.jsx("tbody",{children:(t.rows??[]).map((n,r)=>e.jsx("tr",{style:{backgroundColor:r===0?"#F9FAFB":"#fff"},children:n.map((l,p)=>e.jsx("td",{style:{border:"1px solid #E5E7EB",padding:"6px 8px",fontWeight:r===0?"700":"400"},children:e.jsx("input",{value:l,onChange:h=>{const g=t.rows.map((m,E)=>E===r?m.map((w,A)=>A===p?h.target.value:w):m);o({...t,rows:g})},style:{border:"none",outline:"none",width:"100%",fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit",background:"transparent"}})},p))},r))})})):t.type==="signature"?s(e.jsx("div",{style:{borderTop:"2px solid #111827",paddingTop:4,color:"#6B7280",fontSize:"0.8rem"},children:e.jsx("input",{value:t.content,onChange:n=>o({...t,content:n.target.value}),style:{border:"none",outline:"none",fontSize:"0.8rem",color:"#6B7280",fontFamily:"inherit",background:"transparent",width:"100%"}})})):null}function V({blocks:t,docTitle:o,onUpdate:u,onDelete:a,onMove:c,onAdd:d}){return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[e.jsxs("div",{style:{height:40,backgroundColor:"#fff",borderBottom:"1px solid #E5E7EB",display:"flex",alignItems:"center",padding:"0 16px",gap:8,flexShrink:0},children:[e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#374151"},children:o}),e.jsxs("span",{style:{fontSize:"0.7rem",color:"#9CA3AF"},children:["â€” ",t.length," bloques"]}),e.jsx("div",{style:{flex:1}}),e.jsxs("button",{onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:5,padding:"5px 12px",borderRadius:6,border:"none",backgroundColor:"#10B981",color:"#fff",cursor:"pointer",fontSize:"0.72rem",fontWeight:"700"},children:[e.jsx(F,{size:12})," Exportar PDF"]})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"24px",display:"flex",justifyContent:"center",backgroundColor:"#E5E7EB"},children:e.jsxs("div",{style:{width:680,minHeight:960,backgroundColor:"#fff",borderRadius:4,boxShadow:"0 4px 24px rgba(0,0,0,0.15)",padding:"60px 72px",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:6,backgroundColor:"#10B981",borderRadius:"4px 4px 0 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:32,paddingBottom:16,borderBottom:"1px solid #E5E7EB"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.4rem",fontWeight:"900",color:"#FF6835"},children:"Charlie"}),e.jsx("div",{style:{fontSize:"0.72rem",color:"#9CA3AF"},children:"Marketplace Builder"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#374151",fontWeight:"600"},children:o}),e.jsx("div",{style:{fontSize:"0.68rem",color:"#9CA3AF"},children:new Date().toLocaleDateString("es-UY",{day:"2-digit",month:"long",year:"numeric"})})]})]}),t.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"48px 0",color:"#9CA3AF"},children:[e.jsx("p",{style:{fontSize:"2rem",margin:"0 0 8px"},children:"ðŸ“„"}),e.jsx("p",{style:{fontWeight:"600",fontSize:"0.85rem"},children:"Documento vacÃ­o"}),e.jsx("p",{style:{fontSize:"0.75rem"},children:"UsÃ¡ el panel izquierdo para insertar bloques"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:t.map((x,i)=>e.jsx(O,{block:x,onUpdate:u,onDelete:a,onMove:c,isFirst:i===0,isLast:i===t.length-1},x.id))}),e.jsxs("div",{style:{position:"absolute",bottom:20,left:72,right:72,display:"flex",justifyContent:"space-between",fontSize:"0.65rem",color:"#D1D5DB"},children:[e.jsx("span",{children:"Generado con Charlie Marketplace Builder"}),e.jsx("span",{children:"PÃ¡gina 1"})]})]})})]})}function $({blocks:t,docTitle:o}){const u={};return t.forEach(a=>{u[a.type]=(u[a.type]??0)+1}),e.jsxs("div",{children:[e.jsx("p",{style:b,children:"Documento"}),e.jsx("p",{style:{fontSize:"0.78rem",fontWeight:"700",color:"#111827",marginBottom:12},children:o||"(sin nombre)"}),e.jsx("p",{style:b,children:"Bloques por tipo"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginBottom:14},children:[Object.entries(u).map(([a,c])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 8px",backgroundColor:"#F9FAFB",borderRadius:5},children:[e.jsx("span",{style:{fontSize:"0.72rem",color:"#374151"},children:B[a]}),e.jsx("span",{style:{fontSize:"0.72rem",fontWeight:"700",color:"#FF6835"},children:c})]},a)),t.length===0&&e.jsx("span",{style:{fontSize:"0.72rem",color:"#9CA3AF"},children:"Sin bloques"})]}),e.jsx("p",{style:b,children:"Exportar"}),e.jsx("button",{onClick:()=>window.print(),style:{width:"100%",padding:"9px",borderRadius:8,border:"none",backgroundColor:"#10B981",color:"#fff",cursor:"pointer",fontSize:"0.78rem",fontWeight:"700"},children:"ðŸ“¥ Exportar PDF"})]})}const f={fontSize:"0.6rem",fontWeight:"800",color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.08em",margin:"0 0 6px"},b={fontSize:"0.62rem",fontWeight:"700",color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 4px"},G={width:"100%",padding:"7px 9px",border:"1px solid #E5E7EB",borderRadius:7,fontSize:"0.78rem",outline:"none",marginBottom:12,boxSizing:"border-box",color:"#374151"},v={padding:"2px 6px",borderRadius:4,border:"1px solid #E5E7EB",backgroundColor:"#fff",cursor:"pointer",fontSize:"0.68rem",color:"#374151"};function re({onNavigate:t}){const[o,u]=C.useState("Nuevo Documento"),[a,c]=C.useState([j("h1"),j("paragraph")]),d=s=>c(n=>[...n,j(s)]),x=s=>c(n=>n.map(r=>r.id===s.id?s:r)),i=s=>c(n=>n.filter(r=>r.id!==s)),y=(s,n)=>c(r=>{const l=r.findIndex(g=>g.id===s);if(l<0)return r;const p=l+n;if(p<0||p>=r.length)return r;const h=[...r];return[h[l],h[p]]=[h[p],h[l]],h});return e.jsx(_,{toolId:"gen-documentos",onNavigate:t,leftPanel:e.jsx(N,{docTitle:o,setDocTitle:u,onAdd:d,blockCount:a.length}),canvas:e.jsx(V,{blocks:a,docTitle:o,onUpdate:x,onDelete:i,onMove:y,onAdd:d}),properties:e.jsx($,{blocks:a,docTitle:o}),actions:e.jsxs("button",{onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:4,padding:"4px 10px",borderRadius:5,border:"none",backgroundColor:"#10B981",color:"#fff",cursor:"pointer",fontSize:"0.72rem",fontWeight:"700"},children:[e.jsx(F,{size:12})," PDF"]})})}export{re as GenDocumentosWorkspace};
